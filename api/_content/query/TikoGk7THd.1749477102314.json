{"_path":"/blog/pembayaran-qris-menggunakan-xendit-api-dengan-nestjs","_dir":"blog","_draft":false,"_partial":false,"_locale":"","title":"One-time Payment QRIS Menggunakan Xendit API dengan Nest js","description":"Implementasi Pembayaran QRIS dengan menggunakan Xendit QR Payment API ","thumbnail":"/blog-img/pembayaran-qris-xendit-nest/thumbnail.png","category":["Nuxt","Xendit","Nest"],"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Dengan kasus studi membeli ebook pada website penjualan buku\nwebsite ini hanya melayani pembayaran dengan qr"}]},{"type":"element","tag":"h2","props":{"id":"user-story"},"children":[{"type":"text","value":"User Story"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"User ingin membeli sebuah produk digital berupa ebook, user pergi ke halaman ebook tersebuyt, user klik tombol bayar dengan qr, lalu qr muncul user membayar melalui qr lalu klik cek pembayaran, pembayaran berhasil lalu user secara otomatis diarahkan ke halaman sukses. ebook sudah ditambahkan ke katalog user."}]},{"type":"element","tag":"h2","props":{"id":"alur-pembayaran-dari-generate-qr-hingga-redirect-user-ke-success-page"},"children":[{"type":"text","value":"Alur Pembayaran dari Generate QR Hingga Redirect User ke Success Page"}]},{"type":"element","tag":"image-display","props":{"src":"/blog-img/pembayaran-qris-xendit-nest/sequence-diagram-umum.svg"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"get qr akan melayani kedua buah user story diatas karena akan dicek dahulu apakah ada qr yang dimiliki user pada produk tersebut jika ada tampilkan qr lama jika tidak ada request qr baru ke xendit api"}]},{"type":"element","tag":"h2","props":{"id":"flow-chart-endpoint-post-get-qr"},"children":[{"type":"text","value":"Flow Chart endpoint POST /get-qr"}]},{"type":"element","tag":"image-display","props":{"src":"/blog-img/pembayaran-qris-xendit-nest/flowchart-get-qr.svg"},"children":[]},{"type":"element","tag":"h2","props":{"id":"flow-chart-endpoint-get-check-qr-payment"},"children":[{"type":"text","value":"Flow Chart Endpoint GET /check-qr-payment"}]},{"type":"element","tag":"image-display","props":{"src":"/blog-img/pembayaran-qris-xendit-nest/flowchart-check-qr-payment.svg"},"children":[]},{"type":"element","tag":"h2","props":{"id":"perisapan-sebelum-implementasi"},"children":[{"type":"text","value":"Perisapan sebelum implementasi"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Berikut adalah beberapa persiapan yang harus dilakukan seperti setup Nest js dan menghubungkan backend dengan database serta."}]},{"type":"element","tag":"h3","props":{"id":"langkah-1-api-key-xendit"},"children":[{"type":"text","value":"Langkah 1: API Key Xendit"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Kita memerlukan API Xendit dengan permission Money-In Write dan Money-In Read agar bisa menggunakan API yang seperti Create QR dan Get QR."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Untuk mendapatkan API key pergi ke halaman Dashbaord -> Settings -> Developer -> API Keys."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Klik tombol \"Generate secret key\" dan berikan permission Money-In Write dan Money-In Read."}]},{"type":"element","tag":"h3","props":{"id":"langkah-2-setup-nest-js"},"children":[{"type":"text","value":"Langkah 2: Setup Nest js"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Ikuti langkah-langkah berikut untuk setup nest js dan menghubungkannya ke database"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Inisialisasi proyek Nest js"}]}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes tokyo-night","code":"npm i -g @nestjs/cli\nnest new xendit-qr-nest\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"npm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" i"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":" -g"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" @nestjs/cli\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"nest"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" new"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" xendit-qr-nest\n"}]}]}]}]},{"type":"element","tag":"ol","props":{"start":2},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Inisialisasi modul QR\nSelanjutnya jalankan perintah berikut untuk menginisialisasi modul, controller, dan service qr."}]}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes tokyo-night","code":"nest g module qr\nnest g controller qr\nnest g service qr\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"nest"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" g"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" module"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" qr\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"nest"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" g"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" controller"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" qr\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"nest"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" g"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" service"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" qr\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"langkah-3-hubungkan-ke-database"},"children":[{"type":"text","value":"Langkah 3: Hubungkan ke Database"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Install Dependensi:\nPertama, instal TypeORM dan driver PostgreSQL:"}]}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes tokyo-night","code":"npm install --save @nestjs/typeorm typeorm pg\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"npm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":" --save"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" @nestjs/typeorm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" typeorm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" pg\n"}]}]}]}]},{"type":"element","tag":"ol","props":{"start":2},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Konfigurasi TypeORM:\nBuka file app.module.ts dan tambahkan konfigurasi TypeORM. Anda perlu mengimpor TypeOrmModule dan mengonfigurasinya dengan detail koneksi database PostgreSQL Anda."}]}]},{"type":"element","tag":"pre","props":{"className":"language-typescript shiki shiki-themes tokyo-night","code":"import { Module } from \"@nestjs/common\";\nimport { TypeOrmModule } from \"@nestjs/typeorm\";\nimport { QrModule } from \"./qr/qr.module\";\n\n@Module({\n  imports: [\n    TypeOrmModule.forRoot({\n      type: \"postgres\",\n      host: \"localhost\",\n      port: 5432,\n      username: \"your_username\",\n      password: \"your_password\",\n      database: \"your_database\",\n      entities: [__dirname + \"/**/*.entity{.ts,.js}\"],\n      synchronize: true, // true hanya di development\n    }),\n    QrModule,\n  ],\n})\nexport class AppModule {}\n","language":"typescript","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":"Module"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":" from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"@nestjs/common"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":"TypeOrmModule"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":" from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"@nestjs/typeorm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":"QrModule"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":" from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"./qr/qr.module"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"@"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"Module"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"  imports"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" [\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"    TypeOrmModule"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"forRoot"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"      type"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"postgres"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"      host"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"localhost"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"      port"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":" 5432"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"      username"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"your_username"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"      password"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"your_password"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"      database"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"your_database"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"      entities"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"__dirname"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" +"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"/**/*.entity{.ts,.js}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"]"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"      synchronize"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":" true"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" // true hanya di development\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"    })"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"    QrModule"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  ]"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"})\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" AppModule"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {}\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"implementasi-qr-entity"},"children":[{"type":"text","value":"Implementasi QR entity"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Kita akan mendefinisikan Entity karena akan menyimpan data QR yang dimiliki oleh user di dalam database."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Menyimpan data didatabase ini juga penting agar kita dapat menyimpan riwayat pembelian dari user."}]},{"type":"element","tag":"pre","props":{"className":"language-ts shiki shiki-themes tokyo-night","code":"import { Entity, Column, PrimaryGeneratedColumn } from \"typeorm\";\n\n@Entity(\"qr_codes\") // Specify the table name in the database\nexport class QRCode {\n  @PrimaryGeneratedColumn(\"uuid\") // Automatically generate a unique ID\n  id: string;\n\n  @Column()\n  userId: string;\n\n  @Column()\n  productId: string;\n\n  @Column()\n  qrCodeId: string;\n\n  @Column()\n  expirationDate: Date;\n}\n","language":"ts","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":"Entity"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" Column"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" PrimaryGeneratedColumn"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":" from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"typeorm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"@"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"Entity"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"qr_codes"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" // Specify the table name in the database\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" QRCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"  @"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"PrimaryGeneratedColumn"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"uuid"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" // Automatically generate a unique ID\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"  id"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"  @"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"Column"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"  userId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"  @"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"Column"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"  productId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"  @"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"Column"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"  qrCodeId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"  @"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"Column"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"  expirationDate"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" Date"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"implementasi-qr-dto-data-transfer-object"},"children":[{"type":"text","value":"Implementasi QR DTO (Data Transfer Object)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"DTO digunakan untuk mendefinisikan struktur data yang akan diterima atau dikirim oleh aplikasi. Struktur data ini kemudian akan digunakan untuk validasi dan sebagai interface untuk autocomplete (Typescript)."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Ada dua DTO yang akan dibuat yaitu Create QR dan Xendir QR DTO"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Create QR DTO"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Digunakan untuk validasi data yang akan digunakan untuk create QR Code"}]},{"type":"element","tag":"pre","props":{"className":"language-ts shiki shiki-themes tokyo-night","code":"export class CreateQRCodeDto {\n  userId: string;\n  productId: string;\n  amount: number;\n  basket: {\n    reference_id: string;\n    name: string;\n    category: string;\n    currency: string;\n    price: number;\n    quantity: number;\n    type: \"PRODUCT\" | \"SERVICE\";\n    url?: string;\n    description?: string;\n    sub_category?: string;\n  }[];\n  metadata?: object;\n}\n","filename":"qr/dto/create-qr.dto.ts","language":"ts","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" CreateQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"  userId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"  productId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"  amount"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" number"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"  basket"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"    reference_id"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"    name"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"    category"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"    currency"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"    price"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" number"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"    quantity"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" number"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"    type"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"PRODUCT"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" |"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"SERVICE"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"    url"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"?:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"    description"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"?:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"    sub_category"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"?:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  }[]"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"  metadata"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"?:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" object"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"ol","props":{"start":2},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Xendit QR DTO"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Digunakan untuk validasi data QR yang datang dari Xendit"}]},{"type":"element","tag":"pre","props":{"className":"language-ts shiki shiki-themes tokyo-night","code":"export class XenditQRCodeDto {\n  id: string;\n  reference_id: string;\n  business_id: string;\n  type: string;\n  currency: string;\n  amount: number;\n  channel_code: string;\n  status: string;\n  qr_string: string;\n  expires_at: string;\n  created: string;\n  updated: string;\n  basket: object;\n  metadata: object;\n}\n","filename":"qr/dto/create-qr.dto.ts","language":"ts","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" XenditQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"  id"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"  reference_id"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"  business_id"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"  type"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"  currency"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"  amount"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" number"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"  channel_code"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"  status"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"  qr_string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"  expires_at"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"  created"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"  updated"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"  basket"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" object"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"  metadata"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" object"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"implementasi-controller"},"children":[{"type":"text","value":"Implementasi Controller"}]},{"type":"element","tag":"pre","props":{"className":"language-ts shiki shiki-themes tokyo-night","code":"import { Controller, Post, Body, Get, Param } from \"@nestjs/common\";\nimport { QrService } from \"./qr.service\";\nimport { CreateQRCodeDto } from \"./dto/create-qr.dto\";\nimport { XenditQRCodeDto } from \"./dto/xendit-qr-code.dto\";\n\n@Controller(\"qr\")\nexport class QrController {\n  constructor(private readonly qrService: QrService) {}\n\n  @Post(\"get-qr\")\n  async createQRCode(@Body() createQRCodeDto: CreateQRCodeDto) {\n    console.log(\"Incoming get-qr request:\", createQRCodeDto);\n    // Memeriksa apakah QR code sudah ada di database\n    const existingQRCode = await this.qrService.getQRCode(\n      createQRCodeDto.userId,\n      createQRCodeDto.productId\n    );\n\n    let isPaid = false;\n\n    if (existingQRCode) {\n      // Check if the existing QR code is expired\n      const isExpired = await this.qrService.isExpired(existingQRCode);\n      if (isExpired) {\n        // If expired, delete the existing QR code\n        await this.qrService.deleteQRCode(existingQRCode.id);\n        console.log(`Expired QR code deleted: ${existingQRCode.id}`);\n      } else {\n        // If QR code is not expired, return the existing QR code\n        isPaid = await this.qrService.isQRCodePaid(existingQRCode);\n        return { qrCode: existingQRCode, isPaid };\n      }\n    }\n\n    // If no QR code exists or the existing one was deleted, create a new QR code\n    const newQRCode = await this.qrService.createQRCode(createQRCodeDto);\n    return { qrCode: newQRCode, isPaid };\n  }\n\n  @Get(\"check-qr-payment/:id\")\n  async checkPayment(@Param(\"id\") qrId: string) {\n    // Fetch the QR code using the service\n    const qrCode = await this.qrService.getQRCodeFromXendit(qrId);\n\n    if (qrCode) {\n      // If the QR code is found, return its status\n      const isPaid = await this.qrService.isQRCodePaid(qrCode);\n      return {\n        qrCode,\n        isPaid,\n      };\n    } else {\n      // If the QR code is not found, return a not found status\n      return {\n        message: \"NOT_FOUND\",\n      };\n    }\n  }\n}\n","filename":"qr/qr.controller.ts","language":"ts","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":"Controller"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" Post"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" Body"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" Get"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" Param"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":" from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"@nestjs/common"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":"QrService"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":" from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"./qr.service"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":"CreateQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":" from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"./dto/create-qr.dto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":"XenditQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":" from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"./dto/xendit-qr-code.dto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"@"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"Controller"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"qr"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" QrController"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"  constructor"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"private"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" readonly"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":" qrService"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" QrService"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"  @"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"Post"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"get-qr"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"  async"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" createQRCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"@"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"Body"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"()"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":" createQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" CreateQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"    console"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"Incoming get-qr request:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" createQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    // Memeriksa apakah QR code sudah ada di database\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" existingQRCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":" this"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"qrService"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"getQRCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"      createQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"userId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"      createQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"productId\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"    )"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    let"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" isPaid"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":" false"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"    if"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"existingQRCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"      // Check if the existing QR code is expired\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"      const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" isExpired"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":" this"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"qrService"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"isExpired"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"existingQRCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"      if"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"isExpired"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"        // If expired, delete the existing QR code\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"        await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":" this"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"qrService"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"deleteQRCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"existingQRCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"        console"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"Expired QR code deleted: "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"existingQRCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"      } "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"        // If QR code is not expired, return the existing QR code\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"        isPaid"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":" this"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"qrService"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"isQRCodePaid"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"existingQRCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"        return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"qrCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" existingQRCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" isPaid"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    // If no QR code exists or the existing one was deleted, create a new QR code\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" newQRCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":" this"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"qrService"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"createQRCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"createQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"qrCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" newQRCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" isPaid"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"  @"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"Get"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"check-qr-payment/:id"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":41},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"  async"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" checkPayment"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"@"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"Param"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":" qrId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    // Fetch the QR code using the service\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":43},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" qrCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":" this"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"qrService"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"getQRCodeFromXendit"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"qrId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":44},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":45},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"    if"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"qrCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":46},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"      // If the QR code is found, return its status\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":47},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"      const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" isPaid"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":" this"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"qrService"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"isQRCodePaid"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"qrCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":48},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"      return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":49},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"        qrCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":50},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"        isPaid"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":51},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"      }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":52},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"    } "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":53},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"      // If the QR code is not found, return a not found status\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":54},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"      return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":55},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"        message"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"NOT_FOUND"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":56},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"      }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":57},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":58},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":59},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"implementasi-service"},"children":[{"type":"text","value":"Implementasi Service"}]},{"type":"element","tag":"pre","props":{"className":"language-ts shiki shiki-themes tokyo-night","code":"import axios from \"axios\";\nimport { Injectable } from \"@nestjs/common\";\nimport { CreateQRCodeDto } from \"./dto/create-qr.dto\";\nimport { QRCode } from \"./entities/qr.entity\";\nimport { InjectRepository } from \"@nestjs/typeorm\";\nimport { Repository } from \"typeorm\";\nimport { PaymentConfig } from \"src/config\";\nimport { XenditQRCodeDto } from \"./dto/xendit-qr-code.dto\";\n\n@Injectable()\nexport class QrService {\n  constructor(\n    @InjectRepository(QRCode)\n    private readonly qrCodeRepository: Repository<QRCode>\n  ) {}\n\n  async getQRCode(\n    userId: string,\n    productId: string\n  ): Promise<XenditQRCodeDto | null> {\n    console.log(\n      `Fetching QR code for userId: ${userId}, productId: ${productId}`\n    );\n\n    // Fetch the existing QR code from the database\n    const existingQrCode = await this.qrCodeRepository.findOne({\n      where: { userId, productId },\n    });\n\n    if (existingQrCode) {\n      console.log(`Found existing QR code: ${existingQrCode.qrCodeId}`);\n\n      // Use the qrCodeId from the database to fetch the QR code data from Xendit\n      const qrCodeDataFromXendit = await this.getQRCodeFromXendit(\n        existingQrCode.qrCodeId\n      );\n\n      // Return the QR code data fetched from Xendit\n      return qrCodeDataFromXendit;\n    }\n\n    console.log(\"No existing QR code found.\");\n    return null; // Return null if no QR code is found\n  }\n\n  async getQRCodeFromXendit(qrCodeId: string): Promise<XenditQRCodeDto | null> {\n    console.log(`Fetching QR code from Xendit with ID: ${qrCodeId}`);\n    const xenditApiUrl = `https://api.xendit.co/qr_codes/${qrCodeId}`;\n    const apiKey = PaymentConfig.XENDIT_API_KEY;\n    const headers = {\n      \"Content-Type\": \"application/json\",\n      \"api-version\": \"2022-07-31\",\n      Authorization: `Basic ${Buffer.from(apiKey).toString(\"base64\")}`,\n    };\n\n    try {\n      const response = await axios.get(xenditApiUrl, { headers });\n      console.log(\"Successfully fetched QR code from Xendit:\", response.data);\n      return response.data;\n    } catch (error) {\n      console.error(\"Error fetching QR code from Xendit:\", error);\n      throw new Error(\"Failed to fetch QR code from Xendit\");\n    }\n  }\n\n  async isExpired(qrCode: XenditQRCodeDto): Promise<boolean> {\n    const expired = new Date(qrCode.expires_at) < new Date();\n    console.log(`QR code with ID ${qrCode.id} is expired: ${expired}`);\n    return expired;\n  }\n\n  async isQRCodePaid(qrCode: XenditQRCodeDto): Promise<boolean> {\n    // Check if the QR code status is \"INACTIVE\" and not expired\n    const isExpired = await this.isExpired(qrCode);\n    const isPaid = qrCode.status === \"INACTIVE\" && !isExpired;\n    console.log(`QR code with ID ${qrCode.id} is paid: ${isPaid}`);\n    return isPaid;\n  }\n\n  async createQRCode(\n    createQRCodeDto: CreateQRCodeDto\n  ): Promise<XenditQRCodeDto> {\n    console.log(\"Creating QR code with data:\", createQRCodeDto);\n    const qrData = await this.prepareQRData(createQRCodeDto);\n\n    try {\n      const qrCodeData = await this.requestQRCodeFromXendit(qrData);\n      console.log(\"QR code created successfully:\", qrCodeData);\n\n      // Save the QR code to the database\n      await this.saveQRCodeToDatabase(createQRCodeDto, qrCodeData);\n\n      // Return the QR code data fetched from Xendit\n      return qrCodeData;\n    } catch (error) {\n      console.error(\"Error creating QR code:\", error);\n      throw new Error(\"Failed to create QR code\");\n    }\n  }\n\n  async deleteQRCode(qrCodeId: string): Promise<void> {\n    console.log(`Deleting QR code with ID: ${qrCodeId}`);\n    await this.qrCodeRepository.delete({ qrCodeId });\n    console.log(`QR code with ID ${qrCodeId} has been deleted.`);\n  }\n\n  private async requestQRCodeFromXendit(qrData: any): Promise<any> {\n    console.log(\"Requesting QR code from Xendit with data:\", qrData);\n    const xenditApiUrl = \"https://api.xendit.co/qr_codes\";\n    const apiKey = PaymentConfig.XENDIT_API_KEY;\n    const headers = {\n      \"Content-Type\": \"application/json\",\n      \"api-version\": \"2022-07-31\",\n      Authorization: `Basic ${Buffer.from(apiKey).toString(\"base64\")}`,\n    };\n\n    const response = await axios.post(xenditApiUrl, qrData, { headers });\n    console.log(\"Received response from Xendit:\", response.data);\n    return response.data;\n  }\n\n  private async saveQRCodeToDatabase(\n    createQRCodeDto: CreateQRCodeDto,\n    qrCodeData: any\n  ): Promise<QRCode> {\n    console.log(\"Saving QR code to database:\", {\n      userId: createQRCodeDto.userId,\n      productId: createQRCodeDto.productId,\n      qrCodeId: qrCodeData.id,\n      expirationDate: qrCodeData.expires_at,\n    });\n    const newQRCode = this.qrCodeRepository.create({\n      userId: createQRCodeDto.userId,\n      productId: createQRCodeDto.productId,\n      qrCodeId: qrCodeData.id,\n      expirationDate: qrCodeData.expires_at,\n    });\n    return this.qrCodeRepository.save(newQRCode);\n  }\n\n  private async prepareQRData(createQRCodeDto: CreateQRCodeDto): Promise<any> {\n    const qrData = {\n      reference_id: `order-id-${Date.now()}`,\n      type: \"DYNAMIC\",\n      currency: \"IDR\",\n      amount: createQRCodeDto.amount,\n      expires_at: new Date(\n        Date.now() + PaymentConfig.QR_EXPIRES_AT\n      ).toISOString(),\n      metadata: {\n        userId: createQRCodeDto.userId, // Include userId in metadata\n        productId: createQRCodeDto.productId, // Include productId in metadata\n        ...createQRCodeDto.metadata, // Spread any additional metadata if provided\n      },\n      basket: createQRCodeDto.basket,\n    };\n    console.log(\"Prepared QR data:\", qrData);\n    return qrData;\n  }\n}\n","filename":"qr/qr.service.ts","language":"ts","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" axios"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":" from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"axios"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":"Injectable"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":" from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"@nestjs/common"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":"CreateQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":" from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"./dto/create-qr.dto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":"QRCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":" from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"./entities/qr.entity"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":"InjectRepository"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":" from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"@nestjs/typeorm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":"Repository"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":" from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"typeorm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":"PaymentConfig"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":" from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"src/config"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":"XenditQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":" from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"./dto/xendit-qr-code.dto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"@"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"Injectable"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" QrService"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"  constructor"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"    @"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"InjectRepository"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"QRCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    private"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" readonly"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":" qrCodeRepository"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" Repository"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"QRCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  )"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"  async"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" getQRCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":"    userId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":"    productId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" string\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  )"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" Promise"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"XenditQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" |"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" null"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"    console"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"      `"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"Fetching QR code for userId: "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"userId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":", productId: "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"productId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"    )"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    // Fetch the existing QR code from the database\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" existingQrCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":" this"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"qrCodeRepository"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"findOne"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"      where"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"userId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" productId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"    })"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"    if"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"existingQrCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"      console"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"Found existing QR code: "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"existingQrCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"qrCodeId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"      // Use the qrCodeId from the database to fetch the QR code data from Xendit\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"      const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" qrCodeDataFromXendit"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":" this"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"getQRCodeFromXendit"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"        existingQrCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"qrCodeId\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"      )"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"      // Return the QR code data fetched from Xendit\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"      return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" qrCodeDataFromXendit"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":41},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"    console"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"No existing QR code found."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":43},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":" null"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" // Return null if no QR code is found\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":44},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":45},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":46},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"  async"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" getQRCodeFromXendit"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":"qrCodeId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" Promise"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"XenditQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" |"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" null"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":47},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"    console"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"Fetching QR code from Xendit with ID: "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"qrCodeId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":48},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" xenditApiUrl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" `"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"https://api.xendit.co/qr_codes/"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"qrCodeId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":49},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" apiKey"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" PaymentConfig"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":"XENDIT_API_KEY"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":50},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" headers"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":51},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"      \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"Content-Type"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"application/json"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":52},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"      \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"api-version"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"2022-07-31"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":53},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"      Authorization"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" `"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"Basic "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"Buffer"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"apiKey"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"toString"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"base64"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":54},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"    }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":55},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":56},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"    try"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":57},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"      const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" response"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" axios"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"xenditApiUrl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"headers"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" })"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":58},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"      console"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"Successfully fetched QR code from Xendit:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" response"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":59},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"      return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" response"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":60},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"    } "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":61},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"      console"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"Error fetching QR code from Xendit:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" error"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":62},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"      throw"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" new"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" Error"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"Failed to fetch QR code from Xendit"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":63},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":64},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":65},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":66},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"  async"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" isExpired"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":"qrCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" XenditQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" Promise"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":"boolean"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":67},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" expired"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" new"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" Date"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"qrCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"expires_at"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" new"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" Date"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"()"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":68},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"    console"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"QR code with ID "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"qrCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" is expired: "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"expired"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":69},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" expired"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":70},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":71},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":72},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"  async"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" isQRCodePaid"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":"qrCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" XenditQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" Promise"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":"boolean"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":73},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    // Check if the QR code status is \"INACTIVE\" and not expired\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":74},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" isExpired"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":" this"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"isExpired"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"qrCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":75},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" isPaid"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" qrCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" ==="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"INACTIVE"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" &&"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" !"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"isExpired"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":76},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"    console"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"QR code with ID "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"qrCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" is paid: "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"isPaid"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":77},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" isPaid"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":78},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":79},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":80},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"  async"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" createQRCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":81},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":"    createQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" CreateQRCodeDto\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":82},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  )"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" Promise"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"XenditQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":83},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"    console"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"Creating QR code with data:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" createQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":84},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" qrData"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":" this"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"prepareQRData"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"createQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":85},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":86},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"    try"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":87},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"      const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" qrCodeData"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":" this"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"requestQRCodeFromXendit"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"qrData"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":88},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"      console"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"QR code created successfully:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" qrCodeData"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":89},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":90},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"      // Save the QR code to the database\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":91},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"      await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":" this"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"saveQRCodeToDatabase"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"createQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" qrCodeData"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":92},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":93},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"      // Return the QR code data fetched from Xendit\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":94},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"      return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" qrCodeData"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":95},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"    } "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":96},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"      console"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"Error creating QR code:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" error"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":97},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"      throw"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" new"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" Error"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"Failed to create QR code"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":98},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":99},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":100},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":101},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"  async"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" deleteQRCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":"qrCodeId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" string"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" Promise"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":"void"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":102},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"    console"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"Deleting QR code with ID: "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"qrCodeId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":103},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":" this"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"qrCodeRepository"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"delete"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"qrCodeId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" })"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":104},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"    console"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"QR code with ID "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"qrCodeId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" has been deleted."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":105},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":106},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":107},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"  private"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" async"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" requestQRCodeFromXendit"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":"qrData"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" any"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" Promise"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":"any"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":108},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"    console"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"Requesting QR code from Xendit with data:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" qrData"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":109},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" xenditApiUrl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"https://api.xendit.co/qr_codes"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":110},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" apiKey"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" PaymentConfig"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":"XENDIT_API_KEY"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":111},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" headers"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":112},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"      \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"Content-Type"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"application/json"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":113},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"      \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"api-version"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"2022-07-31"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":114},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"      Authorization"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" `"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"Basic "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"Buffer"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"apiKey"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"toString"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"base64"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":115},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"    }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":116},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":117},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" response"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" axios"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"post"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"xenditApiUrl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" qrData"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"headers"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" })"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":118},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"    console"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"Received response from Xendit:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" response"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":119},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" response"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":120},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":121},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":122},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"  private"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" async"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" saveQRCodeToDatabase"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":123},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":"    createQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" CreateQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":124},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":"    qrCodeData"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" any\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":125},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  )"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" Promise"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"QRCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":126},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"    console"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"Saving QR code to database:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":127},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"      userId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" createQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"userId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":128},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"      productId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" createQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"productId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":129},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"      qrCodeId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" qrCodeData"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":130},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"      expirationDate"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" qrCodeData"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"expires_at"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":131},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"    })"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":132},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" newQRCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":" this"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"qrCodeRepository"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"create"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":133},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"      userId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" createQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"userId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":134},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"      productId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" createQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"productId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":135},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"      qrCodeId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" qrCodeData"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":136},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"      expirationDate"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" qrCodeData"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"expires_at"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":137},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"    })"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":138},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":" this"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"qrCodeRepository"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"save"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"newQRCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":139},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":140},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":141},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"  private"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" async"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" prepareQRData"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":"createQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" CreateQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" Promise"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":"any"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":142},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" qrData"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":143},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"      reference_id"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" `"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"order-id-"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"Date"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"now"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"()"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":144},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"      type"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"DYNAMIC"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":145},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"      currency"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"IDR"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":146},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"      amount"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" createQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"amount"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":147},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"      expires_at"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" new"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" Date"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":148},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"        Date"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"now"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" PaymentConfig"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":"QR_EXPIRES_AT\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":149},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"      )"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"toISOString"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"()"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":150},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"      metadata"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":151},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"        userId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" createQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"userId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" // Include userId in metadata\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":152},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"        productId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" createQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"productId"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" // Include productId in metadata\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":153},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E;--shiki-default-font-weight:bold"},"children":[{"type":"text","value":"        ..."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"createQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"metadata"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" // Spread any additional metadata if provided\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":154},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"      }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":155},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"      basket"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" createQRCodeDto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"basket"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":156},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"    }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":157},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"    console"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"Prepared QR data:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" qrData"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":158},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" qrData"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":159},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":160},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"user-story","depth":2,"text":"User Story"},{"id":"alur-pembayaran-dari-generate-qr-hingga-redirect-user-ke-success-page","depth":2,"text":"Alur Pembayaran dari Generate QR Hingga Redirect User ke Success Page"},{"id":"flow-chart-endpoint-post-get-qr","depth":2,"text":"Flow Chart endpoint POST /get-qr"},{"id":"flow-chart-endpoint-get-check-qr-payment","depth":2,"text":"Flow Chart Endpoint GET /check-qr-payment"},{"id":"perisapan-sebelum-implementasi","depth":2,"text":"Perisapan sebelum implementasi","children":[{"id":"langkah-1-api-key-xendit","depth":3,"text":"Langkah 1: API Key Xendit"},{"id":"langkah-2-setup-nest-js","depth":3,"text":"Langkah 2: Setup Nest js"},{"id":"langkah-3-hubungkan-ke-database","depth":3,"text":"Langkah 3: Hubungkan ke Database"}]},{"id":"implementasi-qr-entity","depth":2,"text":"Implementasi QR entity"},{"id":"implementasi-qr-dto-data-transfer-object","depth":2,"text":"Implementasi QR DTO (Data Transfer Object)"},{"id":"implementasi-controller","depth":2,"text":"Implementasi Controller"},{"id":"implementasi-service","depth":2,"text":"Implementasi Service"}]}},"_type":"markdown","_id":"content:blog:3. pembayaran-qris-menggunakan-xendit-api-dengan-nestjs.md","_source":"content","_file":"blog/3. pembayaran-qris-menggunakan-xendit-api-dengan-nestjs.md","_stem":"blog/3. pembayaran-qris-menggunakan-xendit-api-dengan-nestjs","_extension":"md"}