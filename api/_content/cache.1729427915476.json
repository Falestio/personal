{"generatedAt":1729427933103,"generateTime":740,"contents":[{"_path":"/blog/pengembangan-horizontal-autoscaling-dengan-idcloudhost-api-menggunakan-grafana-alert-dan-traefik-sebagai-load-balancer","_dir":"blog","_draft":false,"_partial":false,"_locale":"","title":"Pengembangan Horizontal Autoscaling dengan IDCloudHost API Menggunakan Grafana Alert dan Traefik sebagai Load Balancer","description":"An overview of Traefik and its role as an API Gateway in modern web applications.","thumbnail":"https://unsplash.it/640/425","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"pengembangan-horizontal-autoscaling-dengan-idcloudhost-api-menggunakan-grafana-alert-dan-traefik-sebagai-load-balancer"},"children":[{"type":"text","value":"Pengembangan Horizontal Autoscaling dengan IDCloudHost API Menggunakan Grafana Alert dan Traefik sebagai Load Balancer"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"IDCloudhost juga menyediakan virtual machine (VM) dengan harga yang relatif terjangkau dibandingkan dengan penyedia layanan cloud lainnya, seperti AWS atau Google Cloud. Penjelasan lebih rinci dapat dilihat pada tabel di bawah ini."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Provider"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Harga dalam USD"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Harga dalam IDR"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"AWS (On-Demand, T3 Small, 2 CPU, 2 GiB RAM, 60 GB EBS Storage)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"$25.03"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Rp 391.939"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"DigitalOcean Droplet (2 CPU, 2 GiB RAM, 60 GB Storage)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"$18.00"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Rp 281.826"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"IDCloudHost (2 CPU, 2 GiB RAM, 60 GB Storage)"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"$7.19"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Rp 112.500"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"*Data diambil pada 8 October 2024"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Harga AWS didapat dari AWS Pricing calculator"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Harga DigitalOcean didapat dari halaman pricing Droplets"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Harga IDCloudHost didapat dari halaman console saat akan emmbuat VM baru"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"1 Dollar = Rp 15.657 (8 Oktober 2024)"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Meskipun harganya lebih terjangkau, IDCloudHost tidak memiliki fitur selengkap penyedia layanan lain, seperti autoscaling."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Fitur autoscaling sangat penting untuk menangani peningkatan trafik secara otomatis tanpa memerlukan intervensi manual. Saat ini, IDCloudhost menyediakan fitur self-upgrade dan self-downgrade pada layanannya, tetapi belum mendukung autoscaling otomatis. Meskipun IDCloudhost memungkinkan scaling secara manual, fitur ini tidak seotomatis autoscaling pada layanan cloud besar lainnya."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Namun, IDCloudhost menyediakan API yang dapat digunakan untuk mengelola setiap sumber daya yang dimiliki, termasuk membuat dan menghapus VM. API ini memungkinkan pengguna untuk melakukan scale up dan scale down sesuai kebutuhan. Artikel ini akan memberikan panduan cara melakukannya."}]},{"type":"element","tag":"h2","props":{"id":"sistem-yang-akan-dibuat"},"children":[{"type":"text","value":"Sistem yang Akan Dibuat"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Gambar dibawah adalah gambaran umum dari sistem autoscaling yang akan dibuat"}]},{"type":"element","tag":"image-display","props":{"src":"/blog/idcloudhost-autoscaling/general-archi.svg"},"children":[]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Service Clones"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nService clones adalah kumpulan virtual machine yang menjalankan layanan tertentu dan akan di-autoscale sesuai kebutuhan. Kelompok virtual machine ini dibuat dari sebuah \"service seed,\" yaitu virtual machine utama yang berfungsi sebagai template. Service seed berisi aplikasi dan konfigurasi yang diperlukan, dan setiap service clone yang dibuat merupakan salinan dari service seed, dengan aplikasi dan konfigurasi yang sama. Dengan demikian, service clones dapat dengan cepat disiapkan berdasarkan konfigurasi standar dari service seed, memastikan konsistensi di seluruh lingkungan autoscaling."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Traefik API Gateway & Load Balancer"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nTraefik adalah API gateway yang berfungsi sebagai lapisan keamanan sebelum akses ke layanan. Dengan Traefik, kita dapat mengimplementasikan autentikasi, rate limiting, CORS, dan fitur keamanan lainnya. Selain itu, Traefik juga bertindak sebagai load balancer yang mendistribusikan request ke layanan. Saat ini, "},{"type":"element","tag":"a","props":{"href":"https://doc.traefik.io/traefik/routing/services/#load-balancing","rel":["nofollow"]},"children":[{"type":"text","value":"Traefik hanya mendukung metode round robin"}]},{"type":"text","value":", di mana lalu lintas dibagi secara bergiliran. Misalnya, jika terdapat dua server, permintaan pertama akan diarahkan ke server satu, permintaan kedua ke server dua, dan permintaan ketiga kembali ke server satu dan seterusnya."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Grafana & Prometheus Monitoring Server"}]},{"type":"text","value":"\nGrafana dan Prometheus digunakan untuk monitoring dan pengiriman notifikasi. Prometheus berperan sebagai sumber data, sementara Grafana digunakan untuk visualisasi data dan penerapan fungsi alert yang dapat memicu scale up atau scale down layanan."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"IDCloudHost API"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nIDCloudHost menyediakan API untuk berinteraksi dengan sumber daya yang dimiliki, termasuk mengelola jaringan VM dan melakukan operasi seperti membaca, membuat, memperbarui, atau menghapus sumber daya."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"IDCloudHost VPC Network"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nVPC memungkinkan server berkomunikasi melalui jaringan privat, yang mengurangi area potensi serangan oleh hacker karena hanya IP publik dari Traefik yang akan diekspos."}]}]},{"type":"element","tag":"info-box","props":{"title":"Kenapa tidak menggunakan load balancer dari IdCloudHost?","type":"question"},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Kendala utama dalam menggunakan load balancer bawaan IDCloudhost adalah keterbatasan pengendalian. Load balancer ini hanya mendukung metode session persistence yang tidak dapat diubah. Selain itu, biaya penggunaannya relatif tinggi, terutama jika hanya digunakan untuk metode round robin."}]}]},{"type":"element","tag":"h2","props":{"id":"overview-alur-kerja-sistem"},"children":[{"type":"text","value":"Overview Alur Kerja Sistem"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Gambar dibawah menunjukan bagaimana cara sistem bekerja secara umum"}]},{"type":"element","tag":"image-display","props":{"src":"/blog/idcloudhost-autoscaling/cara-kerja-umum.svg"},"children":[]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Pengguna mengirim permintaan ke endpoint yang diekspos oleh Traefik melalui HTTPS."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Traefik berfungsi sebagai load balancer dan meneruskan permintaan ke layanan sesuai giliran, menggunakan metode round robin."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Data dari virtual machine setiap layanan dikirim ke server monitoring yang menjalankan Grafana dan Prometheus."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Ketika beban CPU melebihi atau kurang dari ambang batas yang ditentukan, server monitoring akan mengirim perintah ke API IDCloudhost untuk melakukan scale up atau scale down, menggunakan Grafana alert."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"API IDCloudhost kemudian akan melakukan scale up dengan menggandakan service seed untuk membuat service clone baru, atau melakukan scale down dengan menghapus service clone dengan nomor urut tertinggi."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Jika service clone berhasil dibuat (scale up), maka akan terhubung dengan Traefik dan server monitoring. Jika berhasil dihapus (scale down), koneksi antara Traefik dan server monitoring akan diputus."}]}]},{"type":"element","tag":"h2","props":{"id":"penjelasan-detail-cara-kerja-scale-up"},"children":[{"type":"text","value":"Penjelasan Detail Cara Kerja Scale Up"}]},{"type":"element","tag":"image-display","props":{"src":"/blog/idcloudhost-autoscaling/cara-kerja-detail-1.png"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Gambar diatas menunjukkan sebuah keadaan dimana event scale up akan dijalankan, yaitu ketika server menerima permintaan yang tinggi, mengakibatkan penggunaan CPU melebihi batas yang diinginkan. Hal ini akan terdeteksi oleh Prometheus dan Grafana, yang kemudian memicu sebuah event. Event tersebut juga bisa menangani kondisi di mana permintaan terlalu sedikit, sehingga menyebabkan sumber daya tidak terpakai."}]},{"type":"element","tag":"image-display","props":{"src":"/blog/idcloudhost-autoscaling/cara-kerja-detail-2.png"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Tahapan untuk event scale-up dijelaskan pada gambar kedua:"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Banyak lalu lintas yang datang menyebabkan layanan mengalami penggunaan CPU yang tinggi, yang pada akhirnya menghasilkan kesalahan respons kepada pengguna."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Prometheus mengumpulkan data penggunaan CPU dan memicu Grafana alert untuk memulai proses scale-up."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Grafana alert akan merespons dengan memanggil webhook ke server Express yang bertugas menangani event scale-up."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Webhook handler pertama akan berinteraksi dengan API IDCloudhost untuk melakukan cloning terhadap service seed."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Setelah virtual machine layanan berhasil di-clone, webhook handler akan memperbarui daftar target di server Prometheus untuk menyertakan server yang baru dibuat."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Webhook handler kemudian akan mengirim permintaan ke target updater pada server Traefik untuk memperbarui daftar target load balancer, memasukkan server baru ke dalam daftar target."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Target updater pada server Traefik akan memperbarui daftar IP dan menambahkan alamat IP privat dari service clone yang baru."}]}]},{"type":"element","tag":"image-display","props":{"src":"/blog/idcloudhost-autoscaling/cara-kerja-detail-3.png"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Gambar ketiga menunjukkan hasil dari operasi di atas:"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Service yang baru di-clone dari service seed pada langkah ke-4 dari gambar sebelumnya. Semua konfigurasi dan aplikasi dari service seed akan digandakan, termasuk integrasi dengan Prometheus, sehingga service siap digunakan tanpa konfigurasi manual tambahan."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Koneksi antara service yang baru di-clone dan Prometheus pada server monitoring. Prometheus akan memonitor data dari service ini, yang akan digunakan Grafana untuk menampilkan dashboard dan mengirimkan alert jika diperlukan."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Koneksi antara Traefik dan service yang baru di-clone, terbentuk pada langkah keenam dari operasi sebelumnya. Traefik akan menangani operasi API gateway seperti CORS, pembatasan kecepatan (rate limiting), dan load balancing di antara semua service yang terhubung."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Dengan penjelasan ini, proses scaling menjadi lebih jelas, dan koreksi teknis sudah diterapkan agar sesuai dengan cara kerja Prometheus dan Grafana."}]},{"type":"element","tag":"h2","props":{"id":"penjelasan-detail-cara-kerja-scale-down"},"children":[{"type":"text","value":"Penjelasan Detail Cara Kerja Scale Down"}]},{"type":"element","tag":"image-display","props":{"src":"/blog/idcloudhost-autoscaling/cara-kerja-scale-down-1.png"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Event scale down dimuali ketika server menerima permintaan yang lebih randah dari biasanya. Ini menyebabkan CPU Usage yang rendah dan tidak ideal secara cost jika kita menghidupkan dua server dengan beban pekerjaan yamg bisa dilakukan satu server"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Berikut adalah tahapan yang akan dilakukan untuk melakukan scale down"}]},{"type":"element","tag":"image-display","props":{"src":"/blog/idcloudhost-autoscaling/cara-kerja-scale-down-2.png"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Proses yang terhadi sama dengan event scale up. Hanya saja kita akan melakukan penghapusan terhadap hasil server clone dan menghapus koneksi yang ada di Traefik dan server monitoring"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Gambar dibawah ini adalah hasil dari event scale down"}]},{"type":"element","tag":"image-display","props":{"src":"/blog/idcloudhost-autoscaling/cara-kerja-scale-down-3.png"},"children":[]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Daftar server menyisakan service-seed"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Koneksi server clone yang lama ke monitoring server telah dihapus"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Koneksi server cloen yang lama ke Traefik telah dihapus"}]}]},{"type":"element","tag":"h2","props":{"id":"menghindari-trashing-karena-konfigurasi-threshold-yang-tidak-optimal"},"children":[{"type":"text","value":"Menghindari Trashing Karena Konfigurasi Threshold yang Tidak Optimal"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Dalam menentukan ambang batas (threshold) kapan sistem harus melakukan scale-up dan scale-down, kita harus menentukannya dengan cermat. Jika tidak, dapat beresiko terjadi "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"thrashing"}]},{"type":"text","value":". "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Thrashing"}]},{"type":"text","value":" adalah kondisi di mana server terus-menerus melakukan "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"scale-down"}]},{"type":"text","value":" dan "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"scale-up"}]},{"type":"text","value":" secara berulang tanpa henti. Kondisi ini dapat menyebabkan penggunaan sumber daya yang tidak efisien dan membebani sistem, seperti yang dijelaskan pada gambar di bawah."}]},{"type":"element","tag":"image-display","props":{"src":"/blog/idcloudhost-autoscaling/thrashing.svg"},"children":[]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Service clone dengan satu VM mengalami beban CPU 70%, yang melebihi ambang batas (threshold) untuk scale-up."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Sistem melakukan scale-up."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"VM baru berhasil di-clone dan terhubung ke load balancer serta server monitoring."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Beban terbagi secara merata antara dua VM, sehingga rata-rata penggunaan CPU turun menjadi 35%, yang berada di bawah ambang batas untuk scale-down."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Sistem kemudian melakukan scale-down."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Beban CPU kembali naik ke 70%, menyebabkan sistem melakukan scale-up lagi. Kejadian ini terus berulang, menciptakan siklus yang disebut thrashing."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(kurang solusi untuk masalah)"}]},{"type":"element","tag":"h2","props":{"id":"menghindari-thrashing-karena-volume-request-yang-fluktuatif"},"children":[{"type":"text","value":"Menghindari Thrashing Karena Volume Request yang Fluktuatif"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(kurang penjelasan bagaimana thrashing bisa terjaid karena volume request yang terjadi)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Penambahan Grace Period atau Stabilization Window\nTambahkan "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"grace period"}]},{"type":"text","value":" atau "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"stabilization window"}]},{"type":"text","value":", di mana sistem hanya akan scale down jika load di bawah threshold selama periode waktu tertentu (misalnya, selama 5 menit berturut-turut). Ini mencegah scale down terlalu cepat karena perubahan beban yang bersifat sementara."}]},{"type":"element","tag":"h2","props":{"id":"implementasi-service"},"children":[{"type":"text","value":"Implementasi Service"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Server service akan diimplementasikan pada Virtual machine adalah Judge0 dengan operating system Ubuntu, Judge0 akan diinstal dan dijalankan menggunakan Docker pada port 2358. Pada sistem yang sama akan dipasang node exporter untuk mengirimkan data VM ke server monitoring."}]},{"type":"element","tag":"h3","props":{"id":"service"},"children":[{"type":"text","value":"Service"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Instalasi judge0 mengikuti panduan dari dokumentasi resmi "},{"type":"element","tag":"a","props":{"href":"https://github.com/judge0/judge0/releases","rel":["nofollow"]},"children":[{"type":"text","value":"https://github.com/judge0/judge0/releases"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pastikan service Anda berjalan pada port yang diinginkan dan dapat diakses dengan http request"}]},{"type":"element","tag":"h3","props":{"id":"prometheus-client"},"children":[{"type":"text","value":"Prometheus Client"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Sumber: "},{"type":"element","tag":"a","props":{"href":"https://www.linode.com/docs/guides/how-to-install-prometheus-and-grafana-on-ubuntu/#how-to-install-and-configure-node-exporter-on-the-client","rel":["nofollow"]},"children":[{"type":"text","value":"https://www.linode.com/docs/guides/how-to-install-prometheus-and-grafana-on-ubuntu/#how-to-install-and-configure-node-exporter-on-the-client"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Agar sebuah sistem dapat di monitor oleh prometheus diperlukan semacam client untuk mengekspor data sistem. Kita menginstall Node Exporter sebagai client untuk mengirim data ke server monitoring."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Ikut instruksi dibawah untuk menginstall Node Exporter."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When Node Exporter is running, its collection of statistics is available on port "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"9100"}]},{"type":"text","value":". This port is accessible on the internet and anyone running Prometheus elsewhere can potentially collect them. If you are using a firewall, you must open port "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"9100"}]},{"type":"text","value":" using the command "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"sudo ufw allow 9100"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Lihat halaman ini "},{"type":"element","tag":"a","props":{"href":"https://prometheus.io/download/#node_exporter","rel":["nofollow"]},"children":[{"type":"text","value":"https://prometheus.io/download/#node_exporter"}]},{"type":"text","value":" untuk mengetahui versi terbaru dari Node Exporter"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Instal versi terbaru Node Exporter menggunakan "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"wget"}]},{"type":"element","tag":"pre","props":{"code":"wget https://github.com/prometheus/node_exporter/releases/download/v1.8.2/node_exporter-1.8.2.linux-amd64.tar.gz\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"wget https://github.com/prometheus/node_exporter/releases/download/v1.8.2/node_exporter-1.8.2.linux-amd64.tar.gz\n"}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"Cukup ganti "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"1.8.2"}]},{"type":"text","value":" dengan versi terbaru"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Ekstrak aplikasi."},{"type":"element","tag":"pre","props":{"code":"tar xvfz node_exporter-*.tar.gz\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"tar xvfz node_exporter-*.tar.gz\n"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Pindahkan executable "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"node_exporter"}]},{"type":"text","value":" kedalam folder "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"usr/local/bin"}]},{"type":"text","value":" sehingga bisa diakses seluruh sistem"},{"type":"element","tag":"pre","props":{"code":"sudo mv node_exporter-1.5.0.linux-amd64/node_exporter /usr/local/bin\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"sudo mv node_exporter-1.5.0.linux-amd64/node_exporter /usr/local/bin\n"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"("},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Optional"}]},{"type":"text","value":") Hapus sisa file"},{"type":"element","tag":"pre","props":{"code":"rm -r node_exporter-1.5.0.linux-amd64*\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"rm -r node_exporter-1.5.0.linux-amd64*\n"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Jalankan command berikut untuk melihat status instalasi node_exporter"},{"type":"element","tag":"pre","props":{"code":"node_exporter\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"node_exporter\n"}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"Node Exporter berhasil diinstall, kita sudah dapat menjalankan Node Exporter. Namun kita harus menjalankan Node Exporter sebagai system service agar dapat dijalankan ketika server mulai. Ini memungkinkan ketika kita melakukan clone server, Node Exporter akan langsung berjalan harus memulai nya secara manual."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Pertama buatlah user untuk node exporter"},{"type":"element","tag":"pre","props":{"code":"sudo useradd -rs /bin/false node_exporter\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"sudo useradd -rs /bin/false node_exporter\n"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Buatlah service file yang akan digunakan oleh "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"systemctl"}]},{"type":"text","value":". File harus bernama"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"node_exporter.service"}]},{"type":"element","tag":"pre","props":{"code":"sudo nano /etc/systemd/system/node_exporter.service\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"sudo nano /etc/systemd/system/node_exporter.service\n"}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"File: /etc/systemd/system/node_exporter.service"}]},{"type":"element","tag":"pre","props":{"code":"**[**Unit**]**Description**=**Node Exporter\nWants**=**network-online.target\nAfter**=**network-online.target\n\n**[**Service**]**User**=**node_exporter\nGroup**=**node_exporter\nType**=**simple\nRestart**=**on-failure\nRestartSec**=**5s\nExecStart**=**/usr/local/bin/node_exporter\n\n**[**Install**]**WantedBy**=**multi-user.target\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"**[**Unit**]**Description**=**Node Exporter\nWants**=**network-online.target\nAfter**=**network-online.target\n\n**[**Service**]**User**=**node_exporter\nGroup**=**node_exporter\nType**=**simple\nRestart**=**on-failure\nRestartSec**=**5s\nExecStart**=**/usr/local/bin/node_exporter\n\n**[**Install**]**WantedBy**=**multi-user.target\n"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Untuk menjalankan Node Exporter secara otomatis ketika server dimulai (boot time), jalankan command "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"systemctl endable"}]},{"type":"element","tag":"pre","props":{"code":"sudo systemctl enable node_exporter\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"sudo systemctl enable node_exporter\n"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Reload "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"systemctl"}]},{"type":"text","value":" daemon, Mulai node_exporter dan cek statusnya"},{"type":"element","tag":"pre","props":{"code":"sudo systemctl daemon-reload\nsudo systemctl start node_exporter\nsudo systemctl status node_exporter\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"sudo systemctl daemon-reload\nsudo systemctl start node_exporter\nsudo systemctl status node_exporter\n"}]}]},{"type":"element","tag":"pre","props":{"code":"node_exporter.service - Node Exporter\nLoaded: loaded (/etc/systemd/system/node_exporter.service; enabled; vendor preset: enabled)\nActive: active (running) since Tue 2023-04-11 13:48:06 UTC; 4s ago\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"node_exporter.service - Node Exporter\nLoaded: loaded (/etc/systemd/system/node_exporter.service; enabled; vendor preset: enabled)\nActive: active (running) since Tue 2023-04-11 13:48:06 UTC; 4s ago\n"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Cek url "},{"type":"element","tag":"a","props":{"href":"http://localhost","rel":["nofollow"]},"children":[{"type":"text","value":"http://"}]},{"type":"text","value":"localhost:9100/metrics untuk melihat apakah node exporter sudah berjalan"}]}]},{"type":"element","tag":"pre","props":{"code":"curl http://localhost:9100/\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"curl http://localhost:9100/\n"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"something"}]}]},{"type":"element","tag":"h2","props":{"id":"implementasi-api-gateway-dan-load-balancer"},"children":[{"type":"text","value":"Implementasi API Gateway dan Load Balancer"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Traefik akan berfungsi sebagai API Gateway, namun dalam sistem ini, fokus utama adalah pada fitur load balancing. Sistem akan menggunakan load balancer berbasis file, di mana target load balancer akan disimpan dalam file konfigurasi. Dengan mengaktifkan fitur watch pada file tersebut, Traefik akan secara otomatis memperbarui target load balancing tanpa perlu melakukan restart aplikasi saat terjadi perubahan."}]},{"type":"element","tag":"h3","props":{"id":"instalasi"},"children":[{"type":"text","value":"Instalasi"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Install Traefik binary"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"cek versi traefik terbaru di "},{"type":"element","tag":"a","props":{"href":"https://github.com/traefik/traefik/releases","rel":["nofollow"]},"children":[{"type":"text","value":"https://github.com/traefik/traefik/releases"}]}]},{"type":"element","tag":"pre","props":{"code":"wget https://github.com/traefik/traefik/releases/download/v3.1.4/traefik_v3.1.4_linux_amd64.tar.gz\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"wget https://github.com/traefik/traefik/releases/download/v3.1.4/traefik_v3.1.4_linux_amd64.tar.gz\n"}]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"ekstrak"}]}]},{"type":"element","tag":"pre","props":{"code":"tar -zxvf traefik_v3.1.4_linux_amd64.tar.gz\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"tar -zxvf traefik_v3.1.4_linux_amd64.tar.gz\n"}]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"jalankan (bisa dipindahkan ke usr/bin)"}]}]},{"type":"element","tag":"pre","props":{"code":"./traefik --help\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"./traefik --help\n"}]}]},{"type":"element","tag":"h3","props":{"id":"konfigurasi-provider"},"children":[{"type":"text","value":"Konfigurasi Provider"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Buat basic provider setup"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://doc.traefik.io/traefik/providers/file/","rel":["nofollow"]},"children":[{"type":"text","value":"https://doc.traefik.io/traefik/providers/file/"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"jika anda ingin melakukan request https"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Static config (/etc/traefik/static.yaml)"}]},{"type":"element","tag":"pre","props":{"code":"entryPoints:\n  web:\n    address: \":80\"\n\n  websecure:\n    address: \":443\"\n\ncertificatesResolvers:\n  myresolver:\n    acme:\n      email: your-email@example.com\n      storage: acme.json\n      httpChallenge:\n        entryPoint: web\n\nproviders:\n  file:\n    directory: /etc/traefik/configs\n    watch: true\n","language":"yaml","meta":"","className":"language-yaml shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"entryPoints"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"  web"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"    address"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":":80"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"  websecure"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"    address"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":":443"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"certificatesResolvers"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"  myresolver"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"    acme"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"      email"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" your-email@example.com\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"      storage"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" acme.json\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"      httpChallenge"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"        entryPoint"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" web\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"providers"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"  file"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"    directory"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" /etc/traefik/configs\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"    watch"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":" true\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Dynamic config (/etc/traefik/config/dynamic.yaml)"}]},{"type":"element","tag":"pre","props":{"code":"http:\n  routers:\n    submissions:\n        entrypoints:\n            - \"websecure\"\n      rule: \"Host(`submissions.pojokoding.my.id`) && Path(`/submissions`)\"\n      service: \"submissions\"\n      tls:\n        certResolver: myresolver\n","language":"yaml","meta":"","className":"language-yaml shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"http"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"  routers"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"    submissions"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"        entrypoints"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"            -"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"websecure"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"      rule"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"Host(`submissions.pojokoding.my.id`) && Path(`/submissions`)"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"      service"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"submissions"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"      tls"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"        certResolver"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" myresolver\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Services config (/etc/traefik/config/services.yaml)"}]},{"type":"element","tag":"pre","props":{"code":"http:\n    services:\n        submissions:\n            loadBalancer:\n                servers:\n                - url: \"http://<private-ip-services>:2358/\"\n","language":"yaml","meta":"","className":"language-yaml shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"http"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"    services"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"        submissions"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"            loadBalancer"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"                servers"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"                -"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":" url"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"http://<private-ip-services>:2358/"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\"\n"}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Konfigurasi izin read and write file"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Kita perlu mengizinkan agar file "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/etc/traefik/config/services.yaml"}]},{"type":"text","value":" dapat diupdate oleh file bash."}]},{"type":"element","tag":"pre","props":{"code":"","language":"yaml","meta":"","className":"language-yaml shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[]}]}]},{"type":"element","tag":"h3","props":{"id":"konfigurasi-sistem-update-target-load-balancer"},"children":[{"type":"text","value":"Konfigurasi Sistem Update Target Load Balancer"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Kita akan membuat sebuah server express untuk mengangi event scale down dan event scale up"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Tugas dari sistem ini adalah untuk melakukan udpate daftar url pada "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"loadbalancer.servers"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Sistem ini akan menjalankan file bash untuk melakukan update file konfigurasi dinamis traefik"}]},{"type":"element","tag":"h3","props":{"id":"pembuatan-file-bash"},"children":[{"type":"text","value":"Pembuatan File Bash"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"file bash ini akan melakukan update terhadap daftar servers di load balancer"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(update-services.bash)"}]},{"type":"element","tag":"pre","props":{"code":"#!/bin/bash\n\n# Path ke file services.yaml\nSERVICES_FILE=\"/etc/traefik/config/services.yaml\"\n\n# Cek apakah ada parameter yang diberikan\nif [ \"$#\" -lt 1 ]; then\n  echo \"Usage: $0 <url1> <url2> ... <urlN>\"\n  exit 1\nfi\n\n# Tulis ulang services.yaml dengan daftar server baru\necho \"http:\" > $SERVICES_FILE\necho \"  services:\" >> $SERVICES_FILE\necho \"    submissions:\" >> $SERVICES_FILE\necho \"      loadBalancer:\" >> $SERVICES_FILE\necho \"        servers:\" >> $SERVICES_FILE\n\n# Loop melalui semua parameter yang diberikan (URL list)\nfor SERVICE_URL in \"$@\"; do\n  echo \"          - url: \\\"$SERVICE_URL\\\"\" >> $SERVICES_FILE\ndone\n\necho \"Update completed.\"\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"#!/bin/bash\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"# Path ke file services.yaml\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"SERVICES_FILE"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"/etc/traefik/config/services.yaml"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"# Cek apakah ada parameter yang diberikan\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"$#"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" -lt"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":" 1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ];"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" then\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":"  echo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"Usage: "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":"$0"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" <url1> <url2> ... <urlN>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":"  exit"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":" 1\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"fi\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"# Tulis ulang services.yaml dengan daftar server baru\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"http:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" >"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" $SERVICES_FILE\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"  services:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" >>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" $SERVICES_FILE\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"    submissions:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" >>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" $SERVICES_FILE\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"      loadBalancer:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" >>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" $SERVICES_FILE\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"        servers:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" >>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" $SERVICES_FILE\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"# Loop melalui semua parameter yang diberikan (URL list)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" SERVICE_URL"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" in"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":"$@"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" do\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":"  echo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"          - url: "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\\\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"$SERVICE_URL"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\\\"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" >>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" $SERVICES_FILE\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"done\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"Update completed."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\"\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"agar file ini dapat dijalankan kita harus mengkonfigurasi file ini sebagai executable"}]},{"type":"element","tag":"pre","props":{"code":"chmod +x update-services.sh\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"chmod"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" +x"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" update-services.sh\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Berikut contoh menjalankan file ini"}]},{"type":"element","tag":"pre","props":{"code":"./update-services.sh http://10.10.10.10 http://11.11.11.11 http://12.12.12.12\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"./update-services.sh"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" http://10.10.10.10"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" http://11.11.11.11"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" http://12.12.12.12\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"hasilnya"}]},{"type":"element","tag":"pre","props":{"code":"$ cat services.yaml\nhttp:\n  services:\n    submissions:\n      loadBalancer:\n        servers:\n          - url: \"http://10.10.10.10:2358\"\n          - url: \"http://11.11.11.11\"\n          - url: \"http://12.12.12.12\"\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" cat"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" services.yaml\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"http:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"  services:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"    submissions:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"      loadBalancer:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"        servers:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"          -"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" url:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"http://10.10.10.10:2358"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"          -"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" url:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"http://11.11.11.11"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"          -"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" url:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"http://12.12.12.12"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\"\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"pembuatan-service-express-untuk-menerima-daftar-server-terbaru"},"children":[{"type":"text","value":"Pembuatan service express untuk menerima daftar server terbaru"}]},{"type":"element","tag":"pre","props":{"code":"touch index.js\n","language":"jsx","meta":"","className":"language-jsx shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"touch"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" index"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"js\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Lakukan inisiasi aplikasi express terbaru lalu masukan kode berikut pada index.js"}]},{"type":"element","tag":"pre","props":{"code":"const express = require(\"express\");\nconst { exec } = require(\"child_process\");\nconst path = require(\"path\");\n\nconst app = express();\nconst PORT = 3000;\n\napp.use(express.json());\n\napp.post(\"/update-servers\", (req, res) => {\n  const { servers } = req.body;\n\n  if (!servers || !Array.isArray(servers)) {\n    return res\n      .status(400)\n      .json({ message: \"Invalid request body. Expected an array of servers.\" });\n  }\n\n  const serverArgs = servers.map((url) => `\"${url}\"`).join(\" \");\n\n  const scriptPath = \"./update-services.sh\";\n\n  exec(`${scriptPath} ${serverArgs}`, (error, stdout, stderr) => {\n    if (error) {\n      console.error(`Error executing script: ${stderr}`);\n      return res\n        .status(500)\n        .json({ message: \"Failed to update services.yaml\", error: stderr });\n    }\n\n    console.log(`Script output: ${stdout}`);\n    return res\n      .status(200)\n      .json({ message: \"services.yaml updated successfully\", output: stdout });\n  });\n});\n\napp.listen(PORT, () => {\n  console.log(`Server is running on port ${PORT}`);\n});\n","language":"jsx","meta":"","className":"language-jsx shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" express"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" require"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"express"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" exec"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" require"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"child_process"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" path"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" require"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"path"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" app"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" express"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"()"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" PORT"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":" 3000"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"app"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"use"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"express"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"json"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"())"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"app"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"post"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"/update-servers"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":"req"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":" res"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"  const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" servers"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" req"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"body"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"  if"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"servers"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" ||"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" !"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"Array"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"isArray"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"servers"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" res\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":"400"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"json"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"message"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"Invalid request body. Expected an array of servers."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" })"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"  const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" serverArgs"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" servers"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" `"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"join"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"  const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" scriptPath"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"./update-services.sh"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"  exec"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"scriptPath"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":" ${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"serverArgs"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":" stdout"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":" stderr"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"    if"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"      console"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"Error executing script: "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"stderr"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"      return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" res\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":"500"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"        ."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"json"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"message"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"Failed to update services.yaml"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":" error"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" stderr"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" })"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"    console"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"Script output: "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"stdout"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" res\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":"200"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"json"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"message"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"services.yaml updated successfully"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":" output"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" stdout"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" })"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  })"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"})"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"app"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"listen"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":"PORT"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" ()"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"  console"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"Server is running on port "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":"PORT"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"})"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Gunakan PM2 untuk menjalankan service"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Install PM2"}]},{"type":"text","value":" jika belum terpasang:"},{"type":"element","tag":"pre","props":{"code":"npm install pm2 -g\npm2 start index.js\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"npm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" pm2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":" -g\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"pm2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" start"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" index.js\n"}]}]}]}]}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Melihat daftar aplikasi yang sedang berjalan:\n"},{"type":"element","tag":"pre","props":{"code":"pm2 list\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"pm2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" list\n"}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Menyimpan konfigurasi agar server Express tetap berjalan setelah reboot:\n"},{"type":"element","tag":"pre","props":{"code":"pm2 save\npm2 startup\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"pm2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" save\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"pm2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" startup\n"}]}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"PM2 akan menjalankan Express server dalam mode daemon, sehingga akan tetap berjalan meskipun terminal ditutup."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"jalankan perintah dibawah untuk melihat hasilnya"}]},{"type":"element","tag":"pre","props":{"code":"curl -X POST http://localhost:3000/update-servers \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"servers\": [\"http://server1.example.com\", \"http://server2.example.com\"]}'\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"curl -X POST http://localhost:3000/update-servers \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"servers\": [\"http://server1.example.com\", \"http://server2.example.com\"]}'\n"}]}]},{"type":"element","tag":"h2","props":{"id":"implementasi-monitoring"},"children":[{"type":"text","value":"Implementasi Monitoring"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pada bagian artikel sebelumnya kita telah melakukan setup prometheus pada server service. Pada bagian ini kita akan membuat prometheus pada sisi server monitoring untuk menerima data dari kumpulan service"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Lalu kita akan melakukan setup grafana untuk menvisualisasikan data yang didapat dari prometheus dan setup Alerting untuk melakukan event scale up dan scale down"}]},{"type":"element","tag":"h3","props":{"id":"download-dan-install-prometheus"},"children":[{"type":"text","value":"Download dan install prometheus"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.linode.com/docs/guides/how-to-install-prometheus-and-grafana-on-ubuntu/#how-to-configure-prometheus-as-a-service","rel":["nofollow"]},"children":[{"type":"text","value":"https://www.linode.com/docs/guides/how-to-install-prometheus-and-grafana-on-ubuntu/#how-to-configure-prometheus-as-a-service"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Prometheus dapat diunduh sebagai binary yang sudah dikompilasi dari repositori GitHub. Repositori unduhan Prometheus mencantumkan rilis terbaru dari Prometheus. Halaman GitHub Prometheus juga menyediakan instruksi tentang cara membangun Prometheus dari kode sumber atau menjalankannya sebagai kontainer Docker. Untuk mengunduh Prometheus, ikuti langkah-langkah berikut."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Kunjungi halaman unduhan Prometheus dan catat rilis terbaru. Rilis LTS terbaru ditandai dengan jelas di situs tersebut."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Gunakan "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"wget"}]},{"type":"text","value":" untuk mengunduh Prometheus ke server pemantauan. Tautan target memiliki format seperti ini: "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"https://github.com/prometheus/prometheus/releases/download/v[release]/prometheus-[release].linux-amd64.tar.gz"}]},{"type":"text","value":". Gantilah string "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"[release]"}]},{"type":"text","value":" dengan rilis aktual yang akan diunduh. Sebagai contoh, perintah berikut mengunduh rilis 2.37.6."}]},{"type":"element","tag":"pre","props":{"code":"wget <https://github.com/prometheus/prometheus/releases/download/v2.37.6/prometheus-2.37.6.linux-amd64.tar.gz>\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"wget"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"https://github.com/prometheus/prometheus/releases/download/v2.37.6/prometheus-2.37.6.linux-amd64.tar.g"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#A9B1D6"},"children":[{"type":"text","value":"z"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":">\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Ekstrak file Prometheus yang diarsipkan."}]},{"type":"element","tag":"pre","props":{"code":"tar xvfz prometheus-*.tar.gz\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"tar"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" xvfz"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" prometheus-"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":".tar.gz\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(Opsional) Setelah file diekstrak, hapus arsip atau pindahkan ke lokasi lain untuk penyimpanan."}]},{"type":"element","tag":"pre","props":{"code":"rm prometheus-*.tar.gz\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"rm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" prometheus-"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":".tar.gz\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Buat dua direktori baru yang akan digunakan oleh Prometheus. Direktori "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/etc/prometheus"}]},{"type":"text","value":" menyimpan file konfigurasi Prometheus. Direktori "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/var/lib/prometheus"}]},{"type":"text","value":" menyimpan data aplikasi."}]},{"type":"element","tag":"pre","props":{"code":"sudo mkdir /etc/prometheus /var/lib/prometheus\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" mkdir"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" /etc/prometheus"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" /var/lib/prometheus\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Masuk ke direktori utama dari folder prometheus yang diekstrak. Gantilah nama direktori sesuai dengan rilis sebenarnya, misalnya "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"prometheus-2.37.6.linux-amd64"}]},{"type":"text","value":"."}]},{"type":"element","tag":"pre","props":{"code":"cd prometheus-2.37.6.linux-amd64\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" prometheus-2.37.6.linux-amd64\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pindahkan direktori "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"prometheus"}]},{"type":"text","value":" dan "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"promtool"}]},{"type":"text","value":" ke direktori "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/usr/local/bin/"}]},{"type":"text","value":". Ini membuat Prometheus dapat diakses oleh semua pengguna."}]},{"type":"element","tag":"pre","props":{"code":"sudo mv prometheus promtool /usr/local/bin/\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" mv"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" prometheus"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" promtool"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" /usr/local/bin/\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pindahkan file konfigurasi YAML "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"prometheus.yml"}]},{"type":"text","value":" ke direktori "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/etc/prometheus"}]},{"type":"text","value":"."}]},{"type":"element","tag":"pre","props":{"code":"sudo mv prometheus.yml /etc/prometheus/prometheus.yml\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" mv"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" prometheus.yml"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" /etc/prometheus/prometheus.yml\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Direktori "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"consoles"}]},{"type":"text","value":" dan "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"console_libraries"}]},{"type":"text","value":" berisi sumber daya yang diperlukan untuk membuat konsol yang disesuaikan. Fitur ini lebih lanjut dan tidak dibahas dalam panduan ini. Namun, file-file ini juga harus dipindahkan ke direktori "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/etc/prometheus"}]},{"type":"text","value":" jika suatu saat diperlukan."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Catatan:\nSetelah direktori ini dipindahkan, hanya file "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"LICENSE"}]},{"type":"text","value":" dan "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"NOTICE"}]},{"type":"text","value":" yang tersisa di direktori asli. Cadangkan dokumen ini ke lokasi lain dan hapus direktori "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"prometheus-releasenum.linux-amd64"}]},{"type":"text","value":"."}]},{"type":"element","tag":"pre","props":{"code":"sudo mv consoles/ console_libraries/ /etc/prometheus/\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" mv"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" consoles/"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" console_libraries/"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" /etc/prometheus/\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Verifikasi bahwa Prometheus berhasil diinstal dengan menggunakan perintah berikut:"}]},{"type":"element","tag":"pre","props":{"code":"prometheus --version\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"prometheus"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":" --version\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Contoh output:"}]},{"type":"element","tag":"pre","props":{"code":"prometheus, version 2.37.6 (branch: HEAD, revision: 8ade24a23af6be0f35414d6e8ce09598446c29a2)\nbuild user:       root@5f96027a7c3e\nbuild date:       20230220-09:36:40\ngo version:       go1.19.6\nplatform:         linux/amd64\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"prometheus,"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" version"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":" 2.37.6"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#A9B1D6"},"children":[{"type":"text","value":" (branch: "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"HEAD,"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" revision:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" 8ade24a23af6be0f35414d6e8ce09598446c29a2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#A9B1D6"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"build"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" user:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"       root@5f96027a7c3e\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"build"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" date:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"       20230220-09:36:40\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"go"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" version:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"       go1.19.6\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"platform:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"         linux/amd64\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"konfigurasi-prometheus"},"children":[{"type":"text","value":"Konfigurasi Prometheus"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Meskipun Prometheus bisa dijalankan dan dihentikan langsung dari command line, lebih praktis kalau dijalankan sebagai service menggunakan "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"systemctl"}]},{"type":"text","value":". Ini memungkinkan Prometheus berjalan di background."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Sebelum Prometheus bisa memonitor sistem eksternal, konfigurasi tambahan perlu ditambahkan ke file "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"prometheus.yml"}]},{"type":"text","value":". Namun, Prometheus sudah dikonfigurasi untuk memonitor dirinya sendiri, jadi kita bisa melakukan tes sederhana dulu. Untuk konfigurasi Prometheus, ikuti langkah-langkah berikut."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Buat user untuk Prometheus. Perintah berikut akan membuat user sistem:"}]},{"type":"element","tag":"pre","props":{"code":"sudo useradd -rs /bin/false prometheus\n\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" useradd"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":" -rs"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" /bin/"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" prometheus\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Ubah kepemilikan dua direktori yang sudah dibuat sebelumnya ke user "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"prometheus"}]},{"type":"text","value":" yang baru."}]},{"type":"element","tag":"pre","props":{"code":"sudo chown -R prometheus: /etc/prometheus /var/lib/prometheus\n\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" chown"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":" -R"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" prometheus:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" /etc/prometheus"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" /var/lib/prometheus\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Untuk menjalankan Prometheus sebagai service, buat file "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"prometheus.service"}]},{"type":"text","value":" dengan perintah ini:"}]},{"type":"element","tag":"pre","props":{"code":"sudo vi /etc/systemd/system/prometheus.service\n\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" vi"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" /etc/systemd/system/prometheus.service\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Masukkan konten berikut ke dalam file tersebut:"}]},{"type":"element","tag":"pre","props":{"code":"[Unit]\nDescription=Prometheus\nWants=network-online.target\nAfter=network-online.target\n\n[Service]\nUser=prometheus\nGroup=prometheus\nType=simple\nRestart=on-failure\nRestartSec=5s\nExecStart=/usr/local/bin/prometheus \\\\\n    --config.file /etc/prometheus/prometheus.yml \\\\\n    --storage.tsdb.path /var/lib/prometheus/ \\\\\n    --web.console.templates=/etc/prometheus/consoles \\\\\n    --web.console.libraries=/etc/prometheus/console_libraries \\\\\n    --web.listen-address=0.0.0.0:9090 \\\\\n    --web.enable-lifecycle \\\\\n    --log.level=info\n\n[Install]\nWantedBy=multi-user.target\n\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"[Unit]\nDescription=Prometheus\nWants=network-online.target\nAfter=network-online.target\n\n[Service]\nUser=prometheus\nGroup=prometheus\nType=simple\nRestart=on-failure\nRestartSec=5s\nExecStart=/usr/local/bin/prometheus \\\\\n    --config.file /etc/prometheus/prometheus.yml \\\\\n    --storage.tsdb.path /var/lib/prometheus/ \\\\\n    --web.console.templates=/etc/prometheus/consoles \\\\\n    --web.console.libraries=/etc/prometheus/console_libraries \\\\\n    --web.listen-address=0.0.0.0:9090 \\\\\n    --web.enable-lifecycle \\\\\n    --log.level=info\n\n[Install]\nWantedBy=multi-user.target\n\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Beberapa poin penting dari file ini:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Bagian "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Wants"}]},{"type":"text","value":" dan "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"After"}]},{"type":"text","value":" diatur ke "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"network-online.target"}]},{"type":"text","value":" untuk memastikan Prometheus berjalan setelah koneksi jaringan aktif."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"User"}]},{"type":"text","value":" dan "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Group"}]},{"type":"text","value":" diatur ke "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"prometheus"}]},{"type":"text","value":" supaya hanya user ini yang menjalankan Prometheus."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ExecStart"}]},{"type":"text","value":" menentukan lokasi file eksekusi Prometheus dan opsi defaultnya."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-config.file"}]},{"type":"text","value":" menentukan lokasi file konfigurasi sebagai "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/etc/prometheus/prometheus.yml"}]},{"type":"text","value":"."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-storage.tsdb.path"}]},{"type":"text","value":" menentukan direktori penyimpanan data aplikasi di "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/var/lib/prometheus/"}]},{"type":"text","value":"."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-web.listen-address"}]},{"type":"text","value":" diatur ke "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"0.0.0.0:9090"}]},{"type":"text","value":", sehingga Prometheus bisa menerima koneksi di semua interface jaringan."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-web.enable-lifecycle"}]},{"type":"text","value":" memungkinkan pengguna untuk me-reload file konfigurasi tanpa restart Prometheus."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Setelah itu, reload daemon systemctl:"}]},{"type":"element","tag":"pre","props":{"code":"sudo systemctl daemon-reload\n\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" systemctl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" daemon-reload\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"(Opsional) Gunakan perintah "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"systemctl enable"}]},{"type":"text","value":" agar Prometheus otomatis mulai saat sistem di-boot. Kalau tidak, Prometheus harus dijalankan manual."}]},{"type":"element","tag":"pre","props":{"code":"sudo systemctl enable prometheus\n\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" systemctl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" enable"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" prometheus\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Jalankan service Prometheus dan cek statusnya untuk memastikan sudah aktif."}]},{"type":"element","tag":"pre","props":{"code":"sudo systemctl start prometheus\nsudo systemctl status prometheus\n\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" systemctl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" start"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" prometheus\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" systemctl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" status"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" prometheus\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Contoh output status:"}]},{"type":"element","tag":"pre","props":{"code":"prometheus.service - Prometheus\nLoaded: loaded (/etc/systemd/system/prometheus.service; enabled; vendor preset: enabled)\nActive: active (running) since Mon 2023-04-10 13:06:50 UTC; 7s ago\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"prometheus.service"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" -"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" Prometheus\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"Loaded:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" loaded"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#A9B1D6"},"children":[{"type":"text","value":" (/etc/systemd/system/prometheus.service"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" enabled"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" vendor"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" preset:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" enabled"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#A9B1D6"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"Active:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" active"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#A9B1D6"},"children":[{"type":"text","value":" (running) since Mon 2023-04-10 13:06:50 UTC"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" 7s"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" ago\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Akses interface web dan dashboard Prometheus di "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"http://local_ip_addr:9090"}]},{"type":"text","value":". Ganti "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"local_ip_addr"}]},{"type":"text","value":" dengan alamat IP server monitoring. Karena menggunakan file konfigurasi default, informasi yang ditampilkan masih terbatas."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Di dashboard Prometheus, file "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"prometheus.yml"}]},{"type":"text","value":" default punya direktif untuk mengambil data dari localhost. Klik "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Status"}]},{"type":"text","value":" dan pilih "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Targets"}]},{"type":"text","value":" untuk melihat semua target. Seharusnya hanya ada target Prometheus lokal yang ditampilkan."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Node klien sekarang siap untuk dimonitoring. Untuk menambahkan klien ke dalam file "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"prometheus.yml"}]},{"type":"text","value":", ikuti langkah-langkah berikut:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pada server monitoring yang menjalankan Prometheus, buka file "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"prometheus.yml"}]},{"type":"text","value":" untuk diedit."}]},{"type":"element","tag":"pre","props":{"code":"sudo vi /etc/prometheus/prometheus.yml\n\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" vi"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" /etc/prometheus/prometheus.yml\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Temukan bagian berjudul "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"scrape_configs"}]},{"type":"text","value":", yang berisi daftar "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"job"}]},{"type":"text","value":". Saat ini, ada satu job bernama "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"prometheus"}]},{"type":"text","value":". Job ini memonitor tugas lokal Prometheus di port 9090. Di bawah job "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"prometheus"}]},{"type":"text","value":", tambahkan job kedua dengan "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"job_name"}]},{"type":"text","value":" bernama "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"remote_collector"}]},{"type":"text","value":". Masukkan informasi berikut:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Interval pengambilan data ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"scrape_interval"}]},{"type":"text","value":") adalah 10 detik ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"10s"}]},{"type":"text","value":")."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Di dalam "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"static_configs"}]},{"type":"text","value":" pada atribut "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"targets"}]},{"type":"text","value":", tambahkan daftar alamat IP yang ingin dipantau. Pisahkan setiap entri menggunakan koma."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Tambahkan nomor port "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":":9100"}]},{"type":"text","value":" ke setiap alamat IP."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Untuk memonitor server lokal, tambahkan entri "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"localhost:9100"}]},{"type":"text","value":" ke daftar tersebut."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Entri tersebut seharusnya terlihat seperti contoh berikut. Ganti "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"remote_addr"}]},{"type":"text","value":" dengan alamat IP sebenarnya dari klien."}]},{"type":"element","tag":"pre","props":{"code":"File: /etc/prometheus/prometheus.yml\n---\n- job_name: \"remote_collector\"\n  scrape_interval: 10s\n  static_configs:\n    - targets: [\"remote_addr:9100\"]\n","language":"yaml","meta":"","className":"language-yaml shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"File"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" /etc/prometheus/prometheus.yml\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#A9B1D6"},"children":[{"type":"text","value":"---\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":" job_name"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"remote_collector"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"  scrape_interval"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" 10s\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":"  static_configs"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"    -"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E"},"children":[{"type":"text","value":" targets"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"remote_addr:9100"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"]\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Untuk menyegarkan Prometheus segera, restart service Prometheus."}]},{"type":"element","tag":"pre","props":{"code":"sudo systemctl restart prometheus\n\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" systemctl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" restart"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" prometheus\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Menggunakan browser, kunjungi kembali portal web Prometheus di port 9090 pada server monitoring. Pilih "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Status"}]},{"type":"text","value":" lalu "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Targets"}]},{"type":"text","value":". Sebuah link kedua untuk job "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"remote_collector"}]},{"type":"text","value":" akan muncul, yang menuju port 9100 pada klien. Klik link tersebut untuk melihat statistik."}]},{"type":"element","tag":"h3","props":{"id":"install-grafana"},"children":[{"type":"text","value":"Install Grafana"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Prometheus sekarang mengumpulkan statistik dari klien yang terdaftar di bagian "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"scrape_configs"}]},{"type":"text","value":" pada file konfigurasinya. Namun, informasi tersebut hanya dapat dilihat dalam bentuk data mentah yang sulit dibaca dan kurang berguna."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Grafana menyediakan antarmuka untuk melihat statistik yang dikumpulkan oleh Prometheus. Instal Grafana pada server yang sama yang menjalankan Prometheus dan tambahkan Prometheus sebagai sumber data. Setelah itu, instal satu atau lebih panel untuk menginterpretasikan data. Untuk menginstal dan mengonfigurasi Grafana, ikuti langkah-langkah berikut:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Instal beberapa utilitas yang dibutuhkan menggunakan apt."}]},{"type":"element","tag":"pre","props":{"code":"sudo apt-get install -y apt-transport-https software-properties-common\n\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" apt-get"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":" -y"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" apt-transport-https"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" software-properties-common\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Impor kunci GPG Grafana."}]},{"type":"element","tag":"pre","props":{"code":"sudo wget -q -O /usr/share/keyrings/grafana.key <https://apt.grafana.com/gpg.key>\n\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" wget"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":" -q"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":" -O"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" /usr/share/keyrings/grafana.key"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"https://apt.grafana.com/gpg.ke"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#A9B1D6"},"children":[{"type":"text","value":"y"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":">\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Tambahkan repository \"stable releases\" Grafana."}]},{"type":"element","tag":"pre","props":{"code":"echo \"deb [signed-by=/usr/share/keyrings/grafana.key] <https://apt.grafana.com> stable main\" | sudo tee -a /etc/apt/sources.list.d/grafana.list\n\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":"echo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"deb [signed-by=/usr/share/keyrings/grafana.key] <https://apt.grafana.com> stable main"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" |"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" tee"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":" -a"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" /etc/apt/sources.list.d/grafana.list\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Perbarui paket di repository, termasuk paket Grafana yang baru."}]},{"type":"element","tag":"pre","props":{"code":"sudo apt-get update\n\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" apt-get"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" update\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Instal versi open-source dari Grafana."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Catatan"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Untuk menginstal Grafana Enterprise, gunakan perintah "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"sudo apt-get install grafana-enterprise"}]},{"type":"text","value":" sebagai gantinya."}]}]},{"type":"element","tag":"pre","props":{"code":"sudo apt-get install grafana\n\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" apt-get"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" grafana\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Muat ulang daemon systemctl."}]},{"type":"element","tag":"pre","props":{"code":"sudo systemctl daemon-reload\n\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" systemctl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" daemon-reload\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Aktifkan dan mulai server Grafana. Menggunakan "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"systemctl enable"}]},{"type":"text","value":" mengonfigurasi server untuk meluncurkan Grafana saat sistem booting."}]},{"type":"element","tag":"pre","props":{"code":"sudo systemctl enable grafana-server.service\nsudo systemctl start grafana-server\n\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" systemctl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" enable"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" grafana-server.service\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" systemctl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" start"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" grafana-server\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Periksa status server Grafana dan pastikan dalam kondisi aktif."}]},{"type":"element","tag":"pre","props":{"code":"sudo systemctl status grafana-server\n\n","language":"bash","meta":"","className":"language-bash shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" systemctl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" status"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" grafana-server\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"code":"grafana-server.service - Grafana instance\nLoaded: loaded (/lib/systemd/system/grafana-server.service; enabled; vendor preset: enabled)\nActive: active (running) since Tue 2023-04-11 17:31:53 UTC; 9s ago\n\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"grafana-server.service - Grafana instance\nLoaded: loaded (/lib/systemd/system/grafana-server.service; enabled; vendor preset: enabled)\nActive: active (running) since Tue 2023-04-11 17:31:53 UTC; 9s ago\n\n"}]}]},{"type":"element","tag":"h3","props":{"id":"hubungkan-grafana-dengan-prometheus-dan-install-dashboard"},"children":[{"type":"text","value":"Hubungkan grafana dengan prometheus dan install dashboard"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Semua komponen sistem sekarang sudah terinstal, tetapi Grafana dan Prometheus belum diatur untuk berinteraksi. Langkah-langkah konfigurasi yang tersisa, termasuk menambahkan Prometheus sebagai sumber data dan mengimpor panel dashboard, dapat dilakukan menggunakan antarmuka web Grafana."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Untuk mengintegrasikan Grafana dan Prometheus, ikuti langkah-langkah di bawah ini:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Menggunakan browser web, kunjungi port 3000 pada server monitoring. Misalnya, masukkan "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"http://local_ip_addr:3000"}]},{"type":"text","value":", ganti "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"local_ip_addr"}]},{"type":"text","value":" dengan alamat IP sebenarnya. Grafana akan menampilkan halaman login. Gunakan nama pengguna "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"admin"}]},{"type":"text","value":" dan kata sandi default "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"password"}]},{"type":"text","value":". Ubah kata sandi ke nilai yang lebih aman saat diminta."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Halaman Login Grafana"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Setelah berhasil mengubah kata sandi, Grafana akan menampilkan "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Grafana Dashboard"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Untuk menambahkan Prometheus sebagai sumber data, klik simbol roda gigi yang mewakili "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Configuration"}]},{"type":"text","value":", lalu pilih "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Data Sources"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Tombol Konfigurasi untuk Sumber Data Grafana"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pada layar berikutnya, klik tombol "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Add data source"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Tombol Tambah Sumber Data di Grafana"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pilih "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Prometheus"}]},{"type":"text","value":" sebagai sumber data."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Pilih Sumber Data Prometheus"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Untuk sumber Prometheus lokal, seperti yang dijelaskan dalam panduan ini, atur URL ke "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"http://localhost:9090"}]},{"type":"text","value":". Kebanyakan pengaturan lainnya bisa dibiarkan dalam nilai default. Namun, nilai Timeout non-default bisa ditambahkan jika diperlukan."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Konfigurasi Sumber Data Prometheus"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Jika pengaturan sudah sesuai, klik tombol "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Save & test"}]},{"type":"text","value":" di bagian bawah layar."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Simpan Sumber Data Prometheus"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Jika semua pengaturan benar, Grafana akan mengonfirmasi bahwa "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Data source is working"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Pesan Konfirmasi tentang Sumber Data"}]}]},{"type":"element","tag":"h3","props":{"id":"cara-mengimpor-dashboard-grafana"},"children":[{"type":"text","value":"Cara Mengimpor Dashboard Grafana"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Dashboard menampilkan statistik dari node klien menggunakan tata letak yang lebih efektif dan standar. Anda bisa membuat dashboard kustom, tetapi Prometheus telah menyediakan dashboard yang mendukung statistik "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Node Exporter"}]},{"type":"text","value":". Dashboard "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Node Exporter Full"}]},{"type":"text","value":" menggambarkan sebagian besar nilai yang dikumpulkan dari node klien. Lebih mudah mengimpor dashboard ini daripada membuat yang kustom."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Untuk mengimpor dashboard "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Node Exporter"}]},{"type":"text","value":", ikuti langkah-langkah di bawah ini:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Catatan:"}]},{"type":"text","value":" Untuk membuat dashboard kustom, klik tombol "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Dashboard"}]},{"type":"text","value":" (ikon empat kotak), lalu pilih "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"+ New Dashboard"}]},{"type":"text","value":". Lihat panduan "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Building a Dashboard"}]},{"type":"text","value":" di Grafana untuk informasi lebih lanjut."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Kunjungi "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Grafana Dashboard Library"}]},{"type":"text","value":". Masukkan "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Node exporter"}]},{"type":"text","value":" sebagai kata kunci pencarian."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Cari di Pustaka Grafana"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pilih entri untuk "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Node Exporter Full"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Pilih Node Exporter Full"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Catat nomor ID atau gunakan tombol untuk menyalin ID ke clipboard. ID dari dashboard ini saat ini adalah "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"1860"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Detail Node Exporter Full"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Kembali ke dashboard Grafana. Pilih ikon "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Dashboard"}]},{"type":"text","value":" yang terdiri dari empat kotak, dan pilih "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"+ Import"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Pilih Opsi Impor"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Di kotak "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Import via "},{"type":"element","tag":"a","props":{"href":"http://grafana.com/","rel":["nofollow"]},"children":[{"type":"text","value":"grafana.com"}]}]},{"type":"text","value":", masukkan ID "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"1860"}]},{"type":"text","value":" dari langkah sebelumnya. Lalu klik tombol "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Load"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Impor Dashboard Node Exporter"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pada layar berikutnya, konfirmasi detail impor. Pilih "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Prometheus"}]},{"type":"text","value":" sebagai sumber data, lalu klik tombol "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Import"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Mengimpor Dashboard"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Dashboard "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Node Exporter Full"}]},{"type":"text","value":" langsung aktif. Dashboard ini menampilkan metrik kinerja dan status node klien, termasuk detail Memori, RAM, dan CPU. Beberapa menu dropdown di bagian atas layar memungkinkan pengguna untuk memilih host yang ingin diamati dan periode waktu yang akan ditonjolkan."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Contoh berikut menunjukkan bagaimana klien bereaksi saat dibebani program Python yang intens. Widget "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"CPU Busy"}]},{"type":"text","value":" menunjukkan bagaimana CPU hampir mencapai kapasitas maksimal. Jika ini terjadi selama kondisi operasi normal, mungkin menandakan kebutuhan lebih banyak daya CPU."}]},{"type":"element","tag":"h2","props":{"id":"webhook-endpoint-untuk-scale-up-dan-scale-down"},"children":[{"type":"text","value":"Webhook Endpoint untuk scale up dan scale down"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Untuk melakukan scaling, server Express akan dikembangkan yang akan berinteraksi dengan API IDCloudhost. Endpoint ini akan bertanggung jawab untuk menambah atau mengurangi jumlah VM yang digunakan oleh sistem. Berikut algoritma dari masing-masing endpoint:"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Endpoint "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/v1/scale-up"}]}]},{"type":"text","value":":"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Server akan menghitung jumlah VM yang terkait dengan Judge0."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Jika dibutuhkan, server akan membuat salinan (cloning) dari Judge0 seed VM."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Setelah VM baru dibuat, alamat IP publik yang terhubung akan dihapus."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Konfigurasi Traefik akan diperbarui untuk menambahkan IP VM baru ke load balancer."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Target Prometheus akan diperbarui untuk memasukkan VM baru ke dalam pemantauan."}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Endpoint "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/v1/scale-down"}]}]},{"type":"text","value":":"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Server akan memeriksa jumlah VM salinan yang masih aktif."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Jika ada VM yang aktif, server akan memilih VM terbaru untuk dihapus."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"VM yang dipilih kemudian akan dihapus dari sistem."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Konfigurasi Traefik akan diperbarui untuk menghapus VM yang dihapus dari load balancer."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Target Prometheus akan diperbarui untuk memantau VM yang tersisa."}]}]},{"type":"element","tag":"pre","props":{"code":"const express = require(\"express\");\nconst axios = require(\"axios\");\nconst { exec } = require(\"child_process\");\nrequire(\"dotenv\").config();\n\nconst app = express();\nconst apiKey = process.env.API_KEY;\napp.use(express.json());\n\nconst updateKrakenDConfig = (newHost, action) =>\n  new Promise((resolve, reject) => {\n    exec(\n      `./scaling-script.sh ${action} \"${newHost}\"`,\n      (error, stdout, stderr) => {\n        if (error || stderr) {\n          return reject(error || stderr);\n        }\n        resolve(stdout);\n      }\n    );\n  });\n\nconst getVMCount = async () => {\n  const { data } = await axios.get(\n    `https://api.idcloudhost.com/v1/jkt01/network/network/${process.env.PRIVATE_NETWORK_UUID}`,\n    { headers: { apikey: apiKey } }\n  );\n  return data.resources_count - process.env.NON_JUDGE0_VM_COUNT;\n};\n\nconst cloneVM = async (name) => {\n  const { data } = await axios.post(\n    `https://api.idcloudhost.com/v1/jkt01/user-resource/vm/clone?uuid=${process.env.JUDGE0_SEED_UUID}&name=${name}`,\n    {},\n    { headers: { apikey: apiKey } }\n  );\n  return data;\n};\n\nconst deleteFloatingIP = async (vmUuid) => {\n  const { data } = await axios.get(\n    `https://api.idcloudhost.com/v1/jkt01/network/ip_addresses?billing_account_id=${process.env.BILLING_ACCOUNT_ID}`,\n    { headers: { apikey: apiKey } }\n  );\n  const ip = data.find((ip) => ip.assigned_to === vmUuid);\n  await axios.delete(\n    `https://api.idcloudhost.com/v1/jkt01/network/ip_addresses/${ip.address}`,\n    { headers: { apikey: apiKey } }\n  );\n  return ip;\n};\n\nconst updatePrometheusTargets = async () => {\n  const { data } = await axios.get(\n    \"https://api.idcloudhost.com/v1/jkt01/user-resource/vm/list\",\n    { headers: { apikey: apiKey } }\n  );\n  const ips = data\n    .filter((vm) => vm.name.startsWith(\"judge0-child-\"))\n    .map((vm) => vm.private_ipv4);\n  await axios.post(\n    \"http://103.179.56.99:4001/v1/update-prometheus-targets\",\n    { listOfClonesIp: ips }\n  );\n};\n\napp.post(\"/v1/scale-up\", async (req, res) => {\n  try {\n    const vmCount = await getVMCount();\n    const newVmData = await cloneVM(`judge0-child-${vmCount}`);\n    await deleteFloatingIP(newVmData.uuid);\n    await updateKrakenDConfig(\n      `http://${newVmData.private_ipv4}:2358`,\n      \"add\"\n    );\n    await updatePrometheusTargets();\n    res.send({ newVmData });\n  } catch (error) {\n    res.status(500).send({ error: error.message });\n  }\n});\n\napp.post(\"/v1/scale-down\", async (req, res) => {\n  try {\n    const { data } = await axios.get(\n      \"https://api.idcloudhost.com/v1/jkt01/user-resource/vm/list\",\n      { headers: { apikey: apiKey } }\n    );\n    const vmList = data.filter((vm) => vm.name.startsWith(\"judge0-child-\"));\n    if (!vmList.length)\n      return res.send({ message: \"No child VM, scale down aborted\" });\n    const vmToDelete = vmList.sort(\n      (a, b) => new Date(b.created_at) - new Date(a.created_at)\n    )[0];\n    await axios.delete(\n      `https://api.idcloudhost.com/v1/jkt01/user-resource/vm?uuid=${vmToDelete.uuid}`,\n      { headers: { apikey: apiKey } }\n    );\n    await updateKrakenDConfig(\n      `http://${vmToDelete.private_ipv4}:2358`,\n      \"remove\"\n    );\n    await updatePrometheusTargets();\n    res.send({ message: \"VM Deleted\", vmDeleted: vmToDelete });\n  } catch (error) {\n    res.status(500).send({ error: error.message });\n  }\n});\n\nconst PORT = process.env.PORT || 3000;\napp.listen(PORT, () => console.log(`Server running on port ${PORT}`));\n","language":"jsx","meta":"","className":"language-jsx shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" express"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" require"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"express"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" axios"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" require"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"axios"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" exec"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" require"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"child_process"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"dotenv"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"config"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"()"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" app"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" express"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"()"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" apiKey"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" process"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"env"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":"API_KEY"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"app"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"use"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"express"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"json"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"())"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" updateKrakenDConfig"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":"newHost"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":" action"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" =>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"  new"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" Promise"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":"resolve"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":" reject"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"    exec"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"      `"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"./scaling-script.sh "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"action"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"newHost"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"      ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":" stdout"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":" stderr"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"        if"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" ||"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" stderr"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"          return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" reject"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" ||"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" stderr"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"        resolve"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"stdout"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"    )"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  })"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" getVMCount"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" async"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" ()"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"  const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" data"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" axios"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"    `"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"https://api.idcloudhost.com/v1/jkt01/network/network/"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"process"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"env"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":"PRIVATE_NETWORK_UUID"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"    { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"headers"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"apikey"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" apiKey"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" } }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  )"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"  return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" data"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"resources_count"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" -"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" process"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"env"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":"NON_JUDGE0_VM_COUNT"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" cloneVM"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" async"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"  const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" data"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" axios"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"post"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"    `"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"https://api.idcloudhost.com/v1/jkt01/user-resource/vm/clone?uuid="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"process"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"env"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":"JUDGE0_SEED_UUID"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"&name="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"    {}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"    { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"headers"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"apikey"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" apiKey"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" } }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  )"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"  return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" data"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" deleteFloatingIP"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" async"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":"vmUuid"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":41},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"  const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" data"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" axios"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"    `"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"https://api.idcloudhost.com/v1/jkt01/network/ip_addresses?billing_account_id="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"process"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"env"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":"BILLING_ACCOUNT_ID"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":43},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"    { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"headers"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"apikey"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" apiKey"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" } }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":44},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  )"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":45},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"  const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" ip"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" data"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"find"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":"ip"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" ip"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"assigned_to"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" ==="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" vmUuid"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":46},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"  await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" axios"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"delete"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":47},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"    `"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"https://api.idcloudhost.com/v1/jkt01/network/ip_addresses/"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"ip"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"address"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":48},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"    { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"headers"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"apikey"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" apiKey"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" } }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":49},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  )"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":50},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"  return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" ip"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":51},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":52},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":53},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" updatePrometheusTargets"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" async"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" ()"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":54},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"  const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" data"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" axios"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":55},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"    \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"https://api.idcloudhost.com/v1/jkt01/user-resource/vm/list"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":56},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"    { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"headers"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"apikey"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" apiKey"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" } }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":57},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  )"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":58},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"  const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" ips"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" data\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":59},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"    ."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"filter"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" vm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"startsWith"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"judge0-child-"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":60},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"    ."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" vm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"private_ipv4"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":61},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"  await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" axios"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"post"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":62},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"    \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"http://103.179.56.99:4001/v1/update-prometheus-targets"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":63},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"    { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"listOfClonesIp"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" ips"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":64},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  )"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":65},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":66},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":67},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"app"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"post"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"/v1/scale-up"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" async"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":"req"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":" res"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":68},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"  try"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":69},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" vmCount"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" getVMCount"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"()"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":70},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" newVmData"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" cloneVM"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"judge0-child-"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"vmCount"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":71},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" deleteFloatingIP"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"newVmData"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"uuid"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":72},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" updateKrakenDConfig"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":73},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"      `"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"http://"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"newVmData"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"private_ipv4"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":":2358"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":74},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"      \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":75},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"    )"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":76},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" updatePrometheusTargets"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"()"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":77},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"    res"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"send"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"newVmData"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" })"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":78},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  } "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":79},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"    res"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":"500"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"send"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" error"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"message"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" })"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":80},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":81},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"})"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":82},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":83},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"app"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"post"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"/v1/scale-down"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" async"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":"req"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":" res"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":84},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"  try"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":85},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" data"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" axios"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":86},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"      \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"https://api.idcloudhost.com/v1/jkt01/user-resource/vm/list"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":87},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"      { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"headers"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"apikey"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" apiKey"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" } }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":88},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"    )"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":89},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" vmList"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" data"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"filter"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":"vm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" vm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"startsWith"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"judge0-child-"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"))"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":90},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"    if"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"vmList"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"length"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":91},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"      return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" res"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"send"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"message"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"No child VM, scale down aborted"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" })"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":92},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" vmToDelete"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" vmList"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"sort"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":93},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"      ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":" b"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" new"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" Date"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"b"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"created_at"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" new"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" Date"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"a"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"created_at"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":94},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"    )["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"]"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":95},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" axios"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"delete"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":96},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"      `"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"https://api.idcloudhost.com/v1/jkt01/user-resource/vm?uuid="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"vmToDelete"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"uuid"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":97},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"      { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"headers"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"apikey"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" apiKey"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" } }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":98},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"    )"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":99},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" updateKrakenDConfig"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":100},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"      `"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"http://"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"vmToDelete"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"private_ipv4"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":":2358"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":101},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"      \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"remove"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":102},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"    )"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":103},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    await"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":" updatePrometheusTargets"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"()"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":104},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"    res"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"send"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"message"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"VM Deleted"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":" vmDeleted"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" vmToDelete"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" })"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":105},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  } "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":") {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":106},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"    res"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":"500"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"send"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" error"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"message"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" })"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":107},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":108},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"})"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":109},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":110},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" PORT"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" process"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"env"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":"PORT"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" ||"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":" 3000"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":111},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"app"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"listen"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":"PORT"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" ()"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" =>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" console"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"Server running on port "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":"PORT"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"))"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"implementasi-alerting"},"children":[{"type":"text","value":"Implementasi Alerting"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pada bagian ini kita akan mendefinisikan Trigger ketika event scale up atau scale down harus dijalankan. Hal dasar yang harus diketahui ketika"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Keadaan yang harus dipenuhi agar sebuah event ter trigger disebut alert rules"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Apa aksi yang harus dilakukan ketika sebuah alert rules disebut dengan contact points"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pada panduan ini hanya akan dilakukan kalkulasi alert rule dengan CPU Load"}]},{"type":"element","tag":"h3","props":{"id":"menghitung-rata-rata-cpu-load"},"children":[{"type":"text","value":"Menghitung rata-rata CPU Load"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Kita sudah mendapatkan data melalu prometheus, berdasarkan data ini kita dapat menentukan rata rata CPU Load dari sistem."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Kita dapat menggunakan bahasa query dari prometehus yang bernama promql, kita akan membuat sebuah alert rule menggunakan bahasa promp ini"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Kita ingin mengetahui rata rata CPU Load dari semua service yang ada dalam waktu 3 menit terakhir"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Berikut logika diatas dalam bentuk query promql"}]},{"type":"element","tag":"pre","props":{"code":"100 - (avg(\n    rate(node_cpu_seconds_total{job=~\"judge0_seed|judge0_clone\", mode=\"idle\"}[3m])\n)*100)\n","language":"sql","meta":"","className":"language-sql shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"100 - (avg(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"    rate(node_cpu_seconds_total{job=~\"judge0_seed|judge0_clone\", mode=\"idle\"}[3m])\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":")*100)\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Maksud dasar dari query diatas adalah untuk menghitung persentase penggunaan CPU (CPU Usage) dari server yang memiliki job dengan nama judge0_seed atau judge0_clone dalam tiga menit terakhir"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Ada beberapa hal yang menjadi perhatian"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"node_cpu_seconds_total"}]},{"type":"text","value":" adalah metrik yang merepresentasikan waktu total yang dihabiskan oleh CPU dalam berbagai mode seperti idle, user, system, dll."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Label "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"{job=~\"judge0_seed|judge0_clone\", mode=\"idle\"}"}]},{"type":"text","value":" akan mengambil waktu yang dihabiskan oleh cpu dalam masa idle pada server dengan job name judge0_seed atau judge0_clone."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Fungsi"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"rate"}]},{"type":"text","value":" menghitung tingkat perubahan (rate) dari "},{"type":"element","tag":"strong","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"node_cpu_seconds_total"}]}]},{"type":"text","value":" dalam interval waktu 3 menit ("},{"type":"element","tag":"strong","props":{},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"3m"}]}]},{"type":"text","value":")."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Setelah menghitung rate dari waktu idle CPU, hasilnya dikalikan 100 untuk mengonversi menjadi persentase waktu idle."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"**"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"avg"}]},{"type":"text","value":"**Mengambil rata-rata dari semua CPU yang disaring oleh query (jika ada beberapa core CPU)."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"**"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"100 - ..."}]},{"type":"text","value":"**Mengurangi hasil dari persentase waktu idle dari 100 untuk mendapatkan persentase penggunaan CPU (CPU utilization)."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Hasil akhirnya adalah rata-rata persentase penggunaan CPU selama 3 menit terakhir untuk server dengan job name "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"judge0_seed"}]},{"type":"text","value":" atau "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"judge0_clone"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"h3","props":{"id":"mengatur-alert-rule-untuk-event-scale-up"},"children":[{"type":"text","value":"Mengatur Alert Rule Untuk Event Scale Up"}]},{"type":"element","tag":"h4","props":{"id":"_1-enter-alert-rule-name"},"children":[{"type":"text","value":"1. Enter alert rule name"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Masukan nama dari alert rule"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"image.png","src":"https://prod-files-secure.s3.us-west-2.amazonaws.com/a780a314-a324-4050-aaa4-d4498b8af326/5f2a7f83-0f94-488c-9404-d54249a0f222/image.png"},"children":[]}]},{"type":"element","tag":"h4","props":{"id":"_2-query-and-alert-condition"},"children":[{"type":"text","value":"2. Query and Alert Condition"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Gambar dibawah adalah pengaturan untuk query dan treshold."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Gunakan query untuk menghitung average CPU yang sudah kita definisikan sebelumnya"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"image.png","src":"https://prod-files-secure.s3.us-west-2.amazonaws.com/a780a314-a324-4050-aaa4-d4498b8af326/a3acd991-ed39-461d-b3d1-1b2f62bc5b07/image.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Lalu untuk treshold, kita tidak memerlukan fungsi reduce karena query sudah merupakan satu nilaiI"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"image.png","src":"https://prod-files-secure.s3.us-west-2.amazonaws.com/a780a314-a324-4050-aaa4-d4498b8af326/a3580c90-e175-4f44-b19a-ba570503b696/image.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pengaturan diatas menentukan bahwa, grafana akan melakukan alert pada saat Average CPU Load lebih dari 70%"}]},{"type":"element","tag":"h4","props":{"id":"_3-set-evaluation-behaviour"},"children":[{"type":"text","value":"3. Set Evaluation Behaviour"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Gambar dibawah Menunjukan pengaturan dalam pengeturan inerval evaluasi sistem. Pengaturan ini akan menentukan seberapa sering query dijalankan dan seberapa sering grafana akan membandingkan hasil dari query dengan treshold yang kita tentukan."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"image.png","src":"https://prod-files-secure.s3.us-west-2.amazonaws.com/a780a314-a324-4050-aaa4-d4498b8af326/32d0e6c0-6f38-49a8-a40b-5c0faf2cdef0/image.png"},"children":[]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Folder"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Kita akan mengelompokah rule pada folder scale up"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Evaluation grouup and interval"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Kita membuat evaluaiton evaluation group bernama "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"eval_10s"}]},{"type":"text","value":" yang akan mengevaluasi rule setiap sepuluh detik"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Pending Period"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mengatur pending period menjadi "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"none"}]},{"type":"text","value":" artinya ketika treshold terpenuhi, alert rule akan langsung mentrigger api untuk melakukan scaling."}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Configure No Data and error handling"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Tidak di set"}]},{"type":"element","tag":"h4","props":{"id":"_4-configure-labels-and-notifications"},"children":[{"type":"text","value":"4. Configure labels and notifications"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pada menu contact point pilih webhook scale up yang sudah dibuat sebelumnya"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"image.png","src":"https://prod-files-secure.s3.us-west-2.amazonaws.com/a780a314-a324-4050-aaa4-d4498b8af326/bd5c9d79-98e5-4217-acc5-418b491aae1c/image.png"},"children":[]}]},{"type":"element","tag":"h3","props":{"id":"mengatur-alert-rule-untuk-event-scale-down"},"children":[{"type":"text","value":"Mengatur alert rule untuk event scale down"}]},{"type":"element","tag":"h4","props":{"id":"_1-enter-alert-rule-name-1"},"children":[{"type":"text","value":"1. Enter alert rule name"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Masukan nama dari alert rule"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"image.png","src":"https://prod-files-secure.s3.us-west-2.amazonaws.com/a780a314-a324-4050-aaa4-d4498b8af326/abd97cc7-6473-47d0-a5cb-4ecf752670bc/image.png"},"children":[]}]},{"type":"element","tag":"h4","props":{"id":"_2-define-query-and-alert-condition"},"children":[{"type":"text","value":"2. Define Query and Alert Condition"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"image.png","src":"https://prod-files-secure.s3.us-west-2.amazonaws.com/a780a314-a324-4050-aaa4-d4498b8af326/1f407776-b0f4-4ff0-949f-d6c1b11cb980/image.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Sama seperti scalle up gunakan query untuk menghitung Average CPU Load yang sduah ditentukan sebelumnya"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Lalu tentukan threshold seperti ini"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"image.png","src":"https://prod-files-secure.s3.us-west-2.amazonaws.com/a780a314-a324-4050-aaa4-d4498b8af326/4fc24116-f30a-43e2-87a6-ebdcb00c9c7b/image.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Disini kita telah mengatur alert rule scale down akan di jalankan ketika average CPU kurang dari 30%."}]},{"type":"element","tag":"h4","props":{"id":"_3-set-evaluation-behaviour-1"},"children":[{"type":"text","value":"3. Set evaluation behaviour"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Berikut adalah pengaturan evaluasi sistem"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"image.png","src":"https://prod-files-secure.s3.us-west-2.amazonaws.com/a780a314-a324-4050-aaa4-d4498b8af326/975022b2-bd0b-438b-839d-8fcaf2528cf4/image.png"},"children":[]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Folder"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Dikelompokan dalam fodler scale down"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Evaluation groudp and interval"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Menggunakan interval group yang sama dengan alert rule scale up yaitu "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"eval10s"}]},{"type":"text","value":" yang akan mengevaluasi rule setiap 10 detik"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Pending Period"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pending selama 2 menit untuk mengantisipasi ketika terjadi sudden drop, karena scale up merupakan proses yang lama"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"lalu kelebihan server tidka menimpbulakan instability hanya menambah cost. sehingga mengantisipasi drop yang hanya sementara"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"akan lebih baik jika kita memiliki server lebih lebih lama jika sewaktu waktu terjadi spike karena proses scale up lebih lama dari scale down"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Configure No Data and error handling"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Tidak di set"}]},{"type":"element","tag":"h4","props":{"id":"_4-configure-labels-and-notification"},"children":[{"type":"text","value":"4. Configure labels and notification"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pada menu contact point pilih webhook scale down yang sudah dibuat sebelumnya"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"image.png","src":"https://prod-files-secure.s3.us-west-2.amazonaws.com/a780a314-a324-4050-aaa4-d4498b8af326/775d2998-585f-4bd0-b12b-d8400bb56ee6/image.png"},"children":[]}]},{"type":"element","tag":"h2","props":{"id":"konsep-testing"},"children":[{"type":"text","value":"Konsep Testing"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Untuk melakukan testing fitur scale down dan scale up kita harus bisa mengatur secara presisi berapa banyak request yang dikimkan ke server. Artinya kita harus bisa mengendalikan Request per second (RPS), ini diperlukan agar kita bisa mengontrol CPU Load dari sistem secara presisi."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Selain itu kita harus bisa mengatur testing yang ramping artinya testig yang seiring waktu meningkat untuk mensimulasikan trafic pada sehingga mentrigger scale up lalu menurunkan traffic untuk mensimulasikan trafic yang sepi sehingga mentrigger scale down"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Untuk memenuhi kebutuhan ini kita akan menggunakna executor dari K6 yaitu "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"rampign-arrival-rate"}]},{"type":"text","value":" . Executor ini memungkinkan kita untuk mengatur RPS secara presisi dan menaikan atau menurunkan RPS seiring waktu."}]},{"type":"element","tag":"h2","props":{"id":"merancang-kode-testing"},"children":[{"type":"text","value":"Merancang Kode Testing"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pada kode testing dibawah ini kita akan mengirimkan POST Request pada endpoint "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/v1/subm"}]},{"type":"text","value":"issions-dev?wait=true&base64_encoded=false'` yang berfungsi untuk mengeksekusi kode dan akan menghasilkan response berupa hasil dari eksekusi kode."}]},{"type":"element","tag":"pre","props":{"code":"import http from 'k6/http';\nimport { check } from 'k6';\n\n// 1. Source Codes\nconst sourceCodes = [\n  `def leetcode_function(nums, target):\n  for i in range(len(nums)):\n    for j in range(i + 1, len(nums)):\n      if nums[i] + nums[j] == target:\n        return [i, j]\n  return []\nprint('LeetCode Function Result:', leetcode_function([2, 7, 11, 15], 9))\n\n`,\n...\n// other code\n];\n\n// 2. Options\nexport const options = {\n  scenarios: {\n    ramping_test: {\n      executor: 'ramping-arrival-rate',\n      startRate: 0,\n      timeUnit: '1s',\n      preAllocatedVUs: 2,\n      maxVUs: 30,\n      stages: [\n        { duration: '3m', target: 3 },\n        { duration: '9m', target: 6 },\n        { duration: '5m', target: 1 },\n      ],\n    },\n  },\n  discardResponseBodies: true,\n};\n\n// 3. Default Function\nexport default function () {\n    // [a]\n  let url = 'https://submissions.pojokoding.my.id/v1/subm`issions-dev?wait=true&base64_encoded=false';\n\n    // [b]\n  let headers = {\n    'Authorization': '43304a11-4ece-4938-8a81-c4113ed10cf6',\n    'Content-Type': 'application/json',\n  };\n\n    // [c]\n  let randomIndex = Math.floor(Math.random() * sourceCodes.length);\n  let randomSourceCode = sourceCodes[randomIndex];\n\n    // [d]\n  let body = JSON.stringify({\n    source_code: randomSourceCode,\n    language_id: 71,\n  });\n\n    // [e]\n  let res = http.post(url, body, { headers: headers });\n\n    // [f]\n  check(res, {\n    'status is 200': (r) => r.status === 200,\n  });\n}\n","language":"jsx","meta":"","className":"language-jsx shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" http"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":" from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" '"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"k6/http"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":"check"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":" from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" '"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"k6"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"// 1. Source Codes\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" sourceCodes"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" [\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"  `"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"def leetcode_function(nums, target):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"  for i in range(len(nums)):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"    for j in range(i + 1, len(nums)):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"      if nums[i] + nums[j] == target:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"        return [i, j]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"  return []\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"print('LeetCode Function Result:', leetcode_function([2, 7, 11, 15], 9))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F7768E;--shiki-default-font-weight:bold"},"children":[{"type":"text","value":"...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"// other code\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"]"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"// 2. Options\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":" const"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" options"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"  scenarios"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"    ramping_test"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#41A6B5"},"children":[{"type":"text","value":"      executor"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" '"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"ramping-arrival-rate"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#41A6B5"},"children":[{"type":"text","value":"      startRate"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":" 0"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#41A6B5"},"children":[{"type":"text","value":"      timeUnit"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" '"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"1s"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#41A6B5"},"children":[{"type":"text","value":"      preAllocatedVUs"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":" 2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#41A6B5"},"children":[{"type":"text","value":"      maxVUs"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":" 30"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#41A6B5"},"children":[{"type":"text","value":"      stages"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" [\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"        {"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#41A6B5"},"children":[{"type":"text","value":" duration"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" '"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"3m"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#41A6B5"},"children":[{"type":"text","value":" target"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":" 3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"        {"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#41A6B5"},"children":[{"type":"text","value":" duration"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" '"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"9m"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#41A6B5"},"children":[{"type":"text","value":" target"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":" 6"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"        {"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#41A6B5"},"children":[{"type":"text","value":" duration"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" '"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"5m"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#41A6B5"},"children":[{"type":"text","value":" target"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":" 1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"      ]"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"    }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"  discardResponseBodies"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":" true"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"// 3. Default Function\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":" default"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" function"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" ()"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    // [a]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":41},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"  let"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" url"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" '"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"https://submissions.pojokoding.my.id/v1/subm`issions-dev?wait=true&base64_encoded=false"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":43},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    // [b]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":44},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"  let"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" headers"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":45},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"    '"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"Authorization"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" '"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"43304a11-4ece-4938-8a81-c4113ed10cf6"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":46},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"    '"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"Content-Type"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" '"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"application/json"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":47},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  }"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":48},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":49},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    // [c]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":50},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"  let"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" randomIndex"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" Math"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"floor"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"Math"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"random"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" sourceCodes"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"length"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":51},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"  let"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" randomSourceCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" sourceCodes"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"randomIndex"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"]"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":52},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":53},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    // [d]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":54},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"  let"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" body"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#0DB9D7"},"children":[{"type":"text","value":" JSON"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"stringify"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":55},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"    source_code"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" randomSourceCode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":56},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"    language_id"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":" 71"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":57},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  })"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":58},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":59},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    // [e]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":60},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9D7CD8;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"  let"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" res"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":" ="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" http"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"post"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" body"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#73DACA"},"children":[{"type":"text","value":"headers"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" headers"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" })"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":61},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":62},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#51597D;--shiki-default-font-style:italic"},"children":[{"type":"text","value":"    // [f]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":63},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#7AA2F7"},"children":[{"type":"text","value":"  check"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"res"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":64},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"    '"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECE6A"},"children":[{"type":"text","value":"status is 200"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E0AF68"},"children":[{"type":"text","value":"r"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" r"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"status"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#BB9AF7"},"children":[{"type":"text","value":" ==="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FF9E64"},"children":[{"type":"text","value":" 200"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":65},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"  })"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":66},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ABDF5"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Source Codes"},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"const sourceCodes"}]},{"type":"text","value":" : Ini adalah variabel berisi array string kode yang akan dikirmkan bersama body request, value akan dipilih secara random"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Options"},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"scenarios"}]}]},{"type":"text","value":": Mengatur skenario pengujian beban (load testing) yang akan dijalankan oleh K6. Di dalamnya, terdapat definisi satu skenario bernama "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ramping_test"}]},{"type":"text","value":".\n"},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ramping_test"}]}]},{"type":"text","value":": Nama skenario pengujian. Nama ini bisa diubah sesuai kebutuhan.\n"},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"executor"}]}]},{"type":"text","value":": Jenis eksekutor yang menentukan bagaimana virtual users (VU) akan diatur."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ramping-arrival-rate"}]}]},{"type":"text","value":": Eksekutor ini digunakan untuk secara bertahap meningkatkan atau mengurangi jumlah request yang tiba pada sistem, dikendalikan oleh pengaturan rate (RPS) selama periode waktu yang ditentukan."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"startRate"}]}]},{"type":"text","value":": Menentukan "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"rate awal"}]},{"type":"text","value":" dari request yang dikirim ke sistem saat pengujian dimulai. Dalam hal ini, pengujian dimulai dengan "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"0 request per second (RPS)"}]},{"type":"text","value":" dan akan meningkat berdasarkan pengaturan pada "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"stages"}]},{"type":"text","value":"."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"timeUnit"}]}]},{"type":"text","value":": Menentukan satuan waktu untuk mengukur tingkat request. Di sini, setiap request per second (RPS) diukur dalam interval "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"per detik"}]},{"type":"text","value":" ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"1s"}]},{"type":"text","value":"), yang berarti jumlah request yang tiba diatur dalam hitungan per detik."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"preAllocatedVUs"}]}]},{"type":"text","value":": Menentukan jumlah "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"virtual users (VU)"}]},{"type":"text","value":" yang akan dialokasikan "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"sebelum pengujian dimulai"}]},{"type":"text","value":". Dalam kasus ini, "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"2 VU"}]},{"type":"text","value":" dialokasikan untuk menangani request saat pengujian dimulai."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"maxVUs"}]}]},{"type":"text","value":": Menentukan jumlah "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"maksimum VU"}]},{"type":"text","value":" yang bisa digunakan untuk pengujian ini. "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"30 VU"}]},{"type":"text","value":" adalah batas atas yang digunakan untuk mengatur skala maksimal dari pengujian. Jika diperlukan lebih banyak VU untuk memenuhi rate RPS yang diminta, hingga 30 VU akan dialokasikan."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"stages"}]}]},{"type":"text","value":": Tahapan yang mengatur bagaimana tingkat Request Per Second (RPS) akan berubah selama pengujian.\n"},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"{ duration: '3m', target: 3 }"}]},{"type":"text","value":":\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Tahap pertama berlangsung selama "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"3 menit"}]},{"type":"text","value":", dengan target untuk mencapai "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"3 request per second (RPS)"}]},{"type":"text","value":" di akhir tahap ini. Ini adalah proses ramp-up dari 0 RPS hingga 3 RPS."}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"{ duration: '9m', target: 6 }"}]},{"type":"text","value":":\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Tahap kedua berlangsung selama "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"9 menit"}]},{"type":"text","value":", di mana tingkat kedatangan request meningkat secara bertahap hingga mencapai "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"6 RPS"}]},{"type":"text","value":"."}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"{ duration: '5m', target: 1 }"}]},{"type":"text","value":":\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Tahap ketiga berlangsung selama "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"5 menit"}]},{"type":"text","value":", dan dalam tahap ini, tingkat RPS menurun "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"dari 6 RPS menjadi 1 RPS"}]},{"type":"text","value":". Ini merupakan proses ramp-down atau pengurangan beban."}]}]}]}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"discardResponseBodies"}]}]},{"type":"text","value":": Pengaturan ini akan "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"mengabaikan body respons"}]},{"type":"text","value":" dari setiap request yang dikirim. Ini berguna untuk menghemat memori selama pengujian beban, terutama jika body respons tidak penting untuk analisis hasil pengujian."}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Default Function"},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"URL"}]},{"type":"text","value":"\nVariabel "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"url"}]},{"type":"text","value":" berisi alamat endpoint untuk melakukan request POST, yaitu "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"https://submissions.pojokoding.my.id/v1/submissions-dev?wait=true&base64_encoded=false"}]},{"type":"text","value":"."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Headers"}]},{"type":"text","value":"\nVariabel "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"headers"}]},{"type":"text","value":" menyimpan "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"header HTTP"}]},{"type":"text","value":" yang akan dikirim bersama dengan request. Ada dua header yang disetel: - "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Authorization"}]},{"type":"text","value":": Berisi token atau kunci API ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"43304a11-4ece-4938-8a81-c4113ed10cf6"}]},{"type":"text","value":"), yang digunakan untuk otentikasi agar bisa mengakses API. - "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Content-Type"}]},{"type":"text","value":": Mengindikasikan tipe data yang dikirim dalam request adalah JSON ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"application/json"}]},{"type":"text","value":")."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Random Source Code Selection"}]},{"type":"text","value":"\nBaris ini memilih "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"source code secara acak"}]},{"type":"text","value":" dari array "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"sourceCodes"}]},{"type":"text","value":". Variabel "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"randomIndex"}]},{"type":"text","value":" menghasilkan angka acak menggunakan "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Math.random()"}]},{"type":"text","value":" dan "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Math.floor()"}]},{"type":"text","value":" untuk mendapatkan indeks yang valid dari array "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"sourceCodes"}]},{"type":"text","value":". Selanjutnya, kode yang dipilih secara acak disimpan di variabel "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"randomSourceCode"}]},{"type":"text","value":"."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Request Body"}]},{"type":"text","value":"\nVariabel "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"body"}]},{"type":"text","value":" berisi "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"data JSON yang dikirim"}]},{"type":"text","value":" dalam request POST. Dalam body ini terdapat dua parameter: - "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"source_code"}]},{"type":"text","value":": Kode sumber yang diambil secara acak dari "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"sourceCodes"}]},{"type":"text","value":". - "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"language_id"}]},{"type":"text","value":": ID bahasa pemrograman yang digunakan, dalam hal ini 71 (mungkin mengacu pada bahasa pemrograman spesifik seperti Python atau C++). Kode sumber dan ID bahasa dikirim ke API untuk diproses."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"HTTP POST Request"}]},{"type":"text","value":"\nFungsi "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"http.post"}]},{"type":"text","value":" digunakan untuk "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"mengirim request POST"}]},{"type":"text","value":" ke "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"url"}]},{"type":"text","value":" yang sudah didefinisikan. Parameter yang dikirimkan adalah "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"url"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"body"}]},{"type":"text","value":", dan objek "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"headers"}]},{"type":"text","value":". - "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"url"}]},{"type":"text","value":": Alamat endpoint API yang akan diakses. - "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"body"}]},{"type":"text","value":": Data yang dikirim dalam format JSON. - "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"headers"}]},{"type":"text","value":": Header untuk autentikasi dan informasi tipe konten."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Response Validation"}]},{"type":"text","value":"\nFungsi "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"check"}]},{"type":"text","value":" digunakan untuk "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"memeriksa status respons"}]},{"type":"text","value":" dari server. - "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"status is 200"}]},{"type":"text","value":": Mengecek apakah status HTTP dari respons adalah "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"200"}]},{"type":"text","value":" (OK), yang menunjukkan bahwa permintaan berhasil diproses. Jika statusnya 200, check akan mengembalikan "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"true"}]},{"type":"text","value":", jika tidak, "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"false"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"Setiap bagian ini membantu memastikan pengiriman data secara acak ke API dan memverifikasi bahwa respons dari server sesuai dengan ekspektasi."}]}]},{"type":"element","tag":"h2","props":{"id":"menjalankan-testing"},"children":[{"type":"text","value":"Menjalankan Testing"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pastikan sudah menginstall k6 lalu Buka terminal untuk menjalankan command berikut untuk menjalankan testing"}]},{"type":"element","tag":"pre","props":{"code":"k6 run filetest.js\n","language":"jsx","meta":"","className":"language-jsx shiki shiki-themes tokyo-night","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":"k6"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" run"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C0CAF5"},"children":[{"type":"text","value":" filetest"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#89DDFF"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#7DCFFF"},"children":[{"type":"text","value":"js\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"analisis-hasil-testing"},"children":[{"type":"text","value":"Analisis Hasil Testing"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"BELUM ADA"}]},{"type":"element","tag":"h2","props":{"id":"konsiderasi"},"children":[{"type":"text","value":"Konsiderasi"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"PERHITUNGAN SCALE UP DAN SCALE DOWN"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"dalam perhitungan scale up dan scale down identifikasi apa yang menjadi resource utama yang dibutuhkan resource anda, pada panduan kali ini judge0 hanya menggunakan CPU dan sangat sedikit ram sehingga kalkulasi alerting hanya menggunakan parameter CPU"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"KEAMANAN"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"panduan ini sama sekali tidak menerapkan keamanan pada API Gateway sehingga rentan"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"http://mochi.com","rel":["nofollow"]},"children":[{"type":"text","value":"http://mochi.com"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"kelapa.com"}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"sistem-yang-akan-dibuat","depth":2,"text":"Sistem yang Akan Dibuat"},{"id":"overview-alur-kerja-sistem","depth":2,"text":"Overview Alur Kerja Sistem"},{"id":"penjelasan-detail-cara-kerja-scale-up","depth":2,"text":"Penjelasan Detail Cara Kerja Scale Up"},{"id":"penjelasan-detail-cara-kerja-scale-down","depth":2,"text":"Penjelasan Detail Cara Kerja Scale Down"},{"id":"menghindari-trashing-karena-konfigurasi-threshold-yang-tidak-optimal","depth":2,"text":"Menghindari Trashing Karena Konfigurasi Threshold yang Tidak Optimal"},{"id":"menghindari-thrashing-karena-volume-request-yang-fluktuatif","depth":2,"text":"Menghindari Thrashing Karena Volume Request yang Fluktuatif"},{"id":"implementasi-service","depth":2,"text":"Implementasi Service","children":[{"id":"service","depth":3,"text":"Service"},{"id":"prometheus-client","depth":3,"text":"Prometheus Client"}]},{"id":"implementasi-api-gateway-dan-load-balancer","depth":2,"text":"Implementasi API Gateway dan Load Balancer","children":[{"id":"instalasi","depth":3,"text":"Instalasi"},{"id":"konfigurasi-provider","depth":3,"text":"Konfigurasi Provider"},{"id":"konfigurasi-sistem-update-target-load-balancer","depth":3,"text":"Konfigurasi Sistem Update Target Load Balancer"},{"id":"pembuatan-file-bash","depth":3,"text":"Pembuatan File Bash"},{"id":"pembuatan-service-express-untuk-menerima-daftar-server-terbaru","depth":3,"text":"Pembuatan service express untuk menerima daftar server terbaru"}]},{"id":"implementasi-monitoring","depth":2,"text":"Implementasi Monitoring","children":[{"id":"download-dan-install-prometheus","depth":3,"text":"Download dan install prometheus"},{"id":"konfigurasi-prometheus","depth":3,"text":"Konfigurasi Prometheus"},{"id":"install-grafana","depth":3,"text":"Install Grafana"},{"id":"hubungkan-grafana-dengan-prometheus-dan-install-dashboard","depth":3,"text":"Hubungkan grafana dengan prometheus dan install dashboard"},{"id":"cara-mengimpor-dashboard-grafana","depth":3,"text":"Cara Mengimpor Dashboard Grafana"}]},{"id":"webhook-endpoint-untuk-scale-up-dan-scale-down","depth":2,"text":"Webhook Endpoint untuk scale up dan scale down"},{"id":"implementasi-alerting","depth":2,"text":"Implementasi Alerting","children":[{"id":"menghitung-rata-rata-cpu-load","depth":3,"text":"Menghitung rata-rata CPU Load"},{"id":"mengatur-alert-rule-untuk-event-scale-up","depth":3,"text":"Mengatur Alert Rule Untuk Event Scale Up"},{"id":"mengatur-alert-rule-untuk-event-scale-down","depth":3,"text":"Mengatur alert rule untuk event scale down"}]},{"id":"konsep-testing","depth":2,"text":"Konsep Testing"},{"id":"merancang-kode-testing","depth":2,"text":"Merancang Kode Testing"},{"id":"menjalankan-testing","depth":2,"text":"Menjalankan Testing"},{"id":"analisis-hasil-testing","depth":2,"text":"Analisis Hasil Testing"},{"id":"konsiderasi","depth":2,"text":"Konsiderasi"}]}},"_type":"markdown","_id":"content:blog:1. pengembangan-horizontal-autoscaling-dengan-idcloudhost-api-menggunakan-grafana-alert-dan-traefik-sebagai-load-balancer.md","_source":"content","_file":"blog/1. pengembangan-horizontal-autoscaling-dengan-idcloudhost-api-menggunakan-grafana-alert-dan-traefik-sebagai-load-balancer.md","_stem":"blog/1. pengembangan-horizontal-autoscaling-dengan-idcloudhost-api-menggunakan-grafana-alert-dan-traefik-sebagai-load-balancer","_extension":"md"},{"_path":"/blog/integrasi-nuxt-dan-tailwind","_dir":"blog","_draft":false,"_partial":false,"_locale":"","title":"Understanding Traefik as an API Gateway","description":"An overview of Traefik and its role as an API Gateway in modern web applications.","thumbnail":"https://unsplash.it/640/425","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"understanding-traefik-as-an-api-gateway"},"children":[{"type":"text","value":"Understanding Traefik as an API Gateway"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Traefik is a modern HTTP reverse proxy and load balancer that makes deploying microservices easy. It acts as an API Gateway, managing and routing traffic to your various backend services. Traefik integrates seamlessly with your existing infrastructure components, such as Docker, Kubernetes, and other orchestration tools, providing dynamic configuration and real-time updates. This flexibility allows developers to focus on building their applications without worrying about the complexities of traffic management."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"One of the key features of Traefik is its ability to automatically discover services and apply routing rules based on the configuration provided. This means that as you scale your application and add new services, Traefik can automatically adjust its routing to accommodate the changes. Additionally, Traefik supports advanced features like SSL termination, rate limiting, and circuit breakers, making it a powerful tool for ensuring the reliability and security of your microservices architecture."}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:blog:2. integrasi-nuxt-dan-tailwind.md","_source":"content","_file":"blog/2. integrasi-nuxt-dan-tailwind.md","_stem":"blog/2. integrasi-nuxt-dan-tailwind","_extension":"md"},{"_path":"/","_dir":"","_draft":false,"_partial":false,"_locale":"","title":"Title of the page","description":"meta description of the page","code":"const config = {\n  key1: \"value1\",\n  key2: \"value2\",\n  nested: {\n    key3: \"value3\"\n  }\n};\n","anotherAttribute":"This is another attribute","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"hello"},"children":[{"type":"text","value":"Hello"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Kalian bisa begitu kah wkwk"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:index.md","_source":"content","_file":"index.md","_stem":"index","_extension":"md"}],"navigation":[{"title":"Blog","_path":"/blog","children":[{"title":"Pengembangan Horizontal Autoscaling dengan IDCloudHost API Menggunakan Grafana Alert dan Traefik sebagai Load Balancer","_path":"/blog/pengembangan-horizontal-autoscaling-dengan-idcloudhost-api-menggunakan-grafana-alert-dan-traefik-sebagai-load-balancer"},{"title":"Understanding Traefik as an API Gateway","_path":"/blog/integrasi-nuxt-dan-tailwind"}]},{"title":"Title of the page","_path":"/"}]}